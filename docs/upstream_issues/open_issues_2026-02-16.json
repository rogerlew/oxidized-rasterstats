[
  {
    "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/305",
    "repository_url": "https://api.github.com/repos/perrygeo/python-rasterstats",
    "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/305/labels{/name}",
    "comments_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/305/comments",
    "events_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/305/events",
    "html_url": "https://github.com/perrygeo/python-rasterstats/issues/305",
    "id": 2751785495,
    "node_id": "I_kwDOAMUVOs6kBOoX",
    "number": 305,
    "title": "Depreciated dependency on python 3.12 (numpy.distutils) causes error on import",
    "user": {
      "login": "Gerrit-Hoving",
      "id": 35204937,
      "node_id": "MDQ6VXNlcjM1MjA0OTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/35204937?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gerrit-Hoving",
      "html_url": "https://github.com/Gerrit-Hoving",
      "followers_url": "https://api.github.com/users/Gerrit-Hoving/followers",
      "following_url": "https://api.github.com/users/Gerrit-Hoving/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gerrit-Hoving/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gerrit-Hoving/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gerrit-Hoving/subscriptions",
      "organizations_url": "https://api.github.com/users/Gerrit-Hoving/orgs",
      "repos_url": "https://api.github.com/users/Gerrit-Hoving/repos",
      "events_url": "https://api.github.com/users/Gerrit-Hoving/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gerrit-Hoving/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [

    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 2,
    "created_at": "2024-12-20T02:26:31Z",
    "updated_at": "2025-04-06T19:38:36Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "sub_issues_summary": {
      "total": 0,
      "completed": 0,
      "percent_completed": 0
    },
    "issue_dependencies_summary": {
      "blocked_by": 0,
      "total_blocked_by": 0,
      "blocking": 0,
      "total_blocking": 0
    },
    "body": "**Describe the bug**\r\nAttempting to import rasterstats on Python 3.12 results in the following error: \r\nFile ~/.conda/envs/comps/lib/python3.12/site-packages/rasterstats/main.py:8\r\n    import numpy.distutils.system_info as sysinfo\r\n\r\nModuleNotFoundError: No module named 'numpy.distutils'\r\n\r\nI believe that this is because numpy.distutils has been depreciated and removed as of Python 3.12 (https://numpy.org/doc/2.1/reference/distutils_status_migration.html#distutils-status-migration). \r\n\r\n\r\n**To Reproduce**\r\nI was able to reproduce this error on both Windows 11 and Linux (arch) by creating a new anaconda env with the latest python version, installing spyder and rasterstats, and attempting to import rasterstats into my script in spyder\r\n\r\n```python\r\nimport rasterstats\r\n```\r\n",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/305/reactions",
      "total_count": 4,
      "+1": 4,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/305/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "pinned_comment": null
  },
  {
    "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/303",
    "repository_url": "https://api.github.com/repos/perrygeo/python-rasterstats",
    "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/303/labels{/name}",
    "comments_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/303/comments",
    "events_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/303/events",
    "html_url": "https://github.com/perrygeo/python-rasterstats/issues/303",
    "id": 2553469001,
    "node_id": "I_kwDOAMUVOs6YMthJ",
    "number": 303,
    "title": "Bug: progress=true consumes the iterator",
    "user": {
      "login": "perrygeo",
      "id": 1151287,
      "node_id": "MDQ6VXNlcjExNTEyODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1151287?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/perrygeo",
      "html_url": "https://github.com/perrygeo",
      "followers_url": "https://api.github.com/users/perrygeo/followers",
      "following_url": "https://api.github.com/users/perrygeo/following{/other_user}",
      "gists_url": "https://api.github.com/users/perrygeo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/perrygeo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/perrygeo/subscriptions",
      "organizations_url": "https://api.github.com/users/perrygeo/orgs",
      "repos_url": "https://api.github.com/users/perrygeo/repos",
      "events_url": "https://api.github.com/users/perrygeo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/perrygeo/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [
      {
        "id": 56918395,
        "node_id": "MDU6TGFiZWw1NjkxODM5NQ==",
        "url": "https://api.github.com/repos/perrygeo/python-rasterstats/labels/bug",
        "name": "bug",
        "color": "fc2929",
        "default": true,
        "description": null
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 1,
    "created_at": "2024-09-27T18:06:40Z",
    "updated_at": "2024-12-16T13:54:20Z",
    "closed_at": null,
    "author_association": "OWNER",
    "active_lock_reason": null,
    "sub_issues_summary": {
      "total": 0,
      "completed": 0,
      "percent_completed": 0
    },
    "issue_dependencies_summary": {
      "blocked_by": 0,
      "total_blocked_by": 0,
      "blocking": 0,
      "total_blocking": 0
    },
    "body": "**Describe the bug**\r\nThe progress bar feature (introducing in #300 and release in 0.20) consumes the iterator in order to get the length of the sequence. This leaves zero features left to analyze; all `zonal_stats(..., progress=True)` calls will return `[]` \r\n\r\n**To Reproduce**\r\n\r\nSteps to reproduce the behavior:\r\nInstall rasterstats >= 0.20 and run\r\n\r\n```python\r\nfrom rasterstats import zonal_stats\r\n\r\nv = \"tests/data/polygons.shp\"\r\nr = \"tests/data/slope.tif\"\r\n\r\na = zonal_stats(v, r, progress=False)\r\nb = zonal_stats(v, r, progress=True)\r\nassert a == b   # FAILS\r\n```\r\n\r\n**Potential Solutions**\r\n\r\nThe design of the io module is very explicitly a stateful generator (hence the `gen` in `gen_zonal_stats`) so we can't consume it to determine the length.\r\n\r\n1. Remove the explicit length (cons: progress bar will be useless with a sequence of unknown length)\r\n2. Iterate twice (con: performance hit but at least it would be correct)\r\n3. Add a length-hinting private function to the io module so that we can determine the length of any vector input efficiently. (con: may not be possible to do determine length efficiently for all inputs) \r\n\r\nNone of these are good options. If we can't figure out a solution, I'll need to remove the progress bar for correctness sake.",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/303/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "timeline_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/303/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "pinned_comment": null
  },
  {
    "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/295",
    "repository_url": "https://api.github.com/repos/perrygeo/python-rasterstats",
    "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/295/labels{/name}",
    "comments_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/295/comments",
    "events_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/295/events",
    "html_url": "https://github.com/perrygeo/python-rasterstats/issues/295",
    "id": 1952799961,
    "node_id": "I_kwDOAMUVOs50ZVzZ",
    "number": 295,
    "title": "Adding CRS information to output of zonal stats",
    "user": {
      "login": "AlexanderJuestel",
      "id": 45469915,
      "node_id": "MDQ6VXNlcjQ1NDY5OTE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/45469915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AlexanderJuestel",
      "html_url": "https://github.com/AlexanderJuestel",
      "followers_url": "https://api.github.com/users/AlexanderJuestel/followers",
      "following_url": "https://api.github.com/users/AlexanderJuestel/following{/other_user}",
      "gists_url": "https://api.github.com/users/AlexanderJuestel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AlexanderJuestel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AlexanderJuestel/subscriptions",
      "organizations_url": "https://api.github.com/users/AlexanderJuestel/orgs",
      "repos_url": "https://api.github.com/users/AlexanderJuestel/repos",
      "events_url": "https://api.github.com/users/AlexanderJuestel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AlexanderJuestel/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [

    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 0,
    "created_at": "2023-10-19T18:05:21Z",
    "updated_at": "2023-10-19T18:05:21Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "sub_issues_summary": {
      "total": 0,
      "completed": 0,
      "percent_completed": 0
    },
    "issue_dependencies_summary": {
      "blocked_by": 0,
      "total_blocked_by": 0,
      "blocking": 0,
      "total_blocking": 0
    },
    "body": "Hello, \r\n\r\nI am using rasterstats and its zonal statistics where the output of everything is a GeoPandas GeoDataFrame containing the results. I am doing the following as shown below. However, the list of `dicts` (geojson-like) that `zonal_stats` returns does not contain the CRS information of the vector data and in return, a GeoDataFrame is created without CRS. \r\n\r\nI would like to propose adding the CRS information to the output of `zonal_stats` so that GeoPandas can create a GeoDataFrame with a valid CRS from it. I could of course just open the vector data using GeoPandas but I like the way it is accomplished below. \r\n\r\nI could try working on a PR if that feature is desired for rasterstats. \r\n\r\n```python\r\nstats = zonal_stats(\"path_to_vector.shp\", \r\n                             \"path_to_raster.tif\",\r\n                             stats=\"count min mean max median sum std\",\r\n                             geojson_out=True)\r\n\r\ngdf = gpd.GeoDataFrame.from_features(stats)\r\n```\r\n\r\nA place to add the CRS would be somewhere in the `fiona_generator`, I guess: https://github.com/perrygeo/python-rasterstats/blob/5dac003081e8af906cf60494522f2fd3459d0896/src/rasterstats/io.py#L35-L38\r\n\r\n",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/295/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/295/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "pinned_comment": null
  },
  {
    "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/294",
    "repository_url": "https://api.github.com/repos/perrygeo/python-rasterstats",
    "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/294/labels{/name}",
    "comments_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/294/comments",
    "events_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/294/events",
    "html_url": "https://github.com/perrygeo/python-rasterstats/issues/294",
    "id": 1940350815,
    "node_id": "I_kwDOAMUVOs5zp2df",
    "number": 294,
    "title": "point_query does not always return a value for coordinates at the corner of a pixel bordered by no-data",
    "user": {
      "login": "Frederic-gci",
      "id": 55287868,
      "node_id": "MDQ6VXNlcjU1Mjg3ODY4",
      "avatar_url": "https://avatars.githubusercontent.com/u/55287868?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Frederic-gci",
      "html_url": "https://github.com/Frederic-gci",
      "followers_url": "https://api.github.com/users/Frederic-gci/followers",
      "following_url": "https://api.github.com/users/Frederic-gci/following{/other_user}",
      "gists_url": "https://api.github.com/users/Frederic-gci/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Frederic-gci/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Frederic-gci/subscriptions",
      "organizations_url": "https://api.github.com/users/Frederic-gci/orgs",
      "repos_url": "https://api.github.com/users/Frederic-gci/repos",
      "events_url": "https://api.github.com/users/Frederic-gci/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Frederic-gci/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [
      {
        "id": 56918395,
        "node_id": "MDU6TGFiZWw1NjkxODM5NQ==",
        "url": "https://api.github.com/repos/perrygeo/python-rasterstats/labels/bug",
        "name": "bug",
        "color": "fc2929",
        "default": true,
        "description": null
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 0,
    "created_at": "2023-10-12T16:24:51Z",
    "updated_at": "2023-10-13T17:25:15Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "sub_issues_summary": {
      "total": 0,
      "completed": 0,
      "percent_completed": 0
    },
    "issue_dependencies_summary": {
      "blocked_by": 0,
      "total_blocked_by": 0,
      "blocking": 0,
      "total_blocking": 0
    },
    "body": "**Describe the bug**\r\nWhen querying a raster for coordinates that are at the corner of a pixel limited by no-data, I expect to retrieve some data for every corner, but in 3/4 cases, None is returned. \r\n\r\n**To Reproduce**\r\nThis happened to me querying a large raster in EPSG:32188 projection for coordinates that are bordering no-data pixels. Here is a minimal example:\r\n\r\n```python\r\nimport numpy as np\r\nfrom rasterio.transform import Affine\r\nfrom rasterstats import point_query\r\nfrom shapely.geometry import Point\r\n\r\ndata = np.array([[0,0,0],[0,1,0], [0,0,0]])\r\ntransform = Affine(1, 0, 0, 0, -1, 3)\r\npoints = [Point(1, 1), Point(2, 1), Point(1, 2), Point(2, 2)]\r\nprint(point_query(points, data, affine=transform, interpolate='nearest', nodata=0))\r\nprint(point_query(points, data, affine=transform, interpolate='bilinear', nodata=0))\r\n```\r\nrasterstats version is 0.19.0\r\n",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/294/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/294/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "pinned_comment": null
  },
  {
    "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/293",
    "repository_url": "https://api.github.com/repos/perrygeo/python-rasterstats",
    "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/293/labels{/name}",
    "comments_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/293/comments",
    "events_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/293/events",
    "html_url": "https://github.com/perrygeo/python-rasterstats/pull/293",
    "id": 1898249647,
    "node_id": "PR_kwDOAMUVOs5abnFf",
    "number": 293,
    "title": "add gdf_zonal_stat to main.py",
    "user": {
      "login": "TomKenda",
      "id": 75068847,
      "node_id": "MDQ6VXNlcjc1MDY4ODQ3",
      "avatar_url": "https://avatars.githubusercontent.com/u/75068847?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomKenda",
      "html_url": "https://github.com/TomKenda",
      "followers_url": "https://api.github.com/users/TomKenda/followers",
      "following_url": "https://api.github.com/users/TomKenda/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomKenda/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomKenda/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomKenda/subscriptions",
      "organizations_url": "https://api.github.com/users/TomKenda/orgs",
      "repos_url": "https://api.github.com/users/TomKenda/repos",
      "events_url": "https://api.github.com/users/TomKenda/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomKenda/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [

    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 3,
    "created_at": "2023-09-15T11:38:36Z",
    "updated_at": "2025-09-03T20:58:06Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/pulls/293",
      "html_url": "https://github.com/perrygeo/python-rasterstats/pull/293",
      "diff_url": "https://github.com/perrygeo/python-rasterstats/pull/293.diff",
      "patch_url": "https://github.com/perrygeo/python-rasterstats/pull/293.patch",
      "merged_at": null
    },
    "body": "Hello,\r\nI am not sure it's the best way to do this but I would like to propose a function to get the result of the zonal stat directly as a Geodataframe to keep all the properties and the geometry together with the initial vectors CRS. I you think there's a more efficient way to do this I would be happy to ear it.",
    "closed_by": {
      "login": "TomKenda",
      "id": 75068847,
      "node_id": "MDQ6VXNlcjc1MDY4ODQ3",
      "avatar_url": "https://avatars.githubusercontent.com/u/75068847?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TomKenda",
      "html_url": "https://github.com/TomKenda",
      "followers_url": "https://api.github.com/users/TomKenda/followers",
      "following_url": "https://api.github.com/users/TomKenda/following{/other_user}",
      "gists_url": "https://api.github.com/users/TomKenda/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TomKenda/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TomKenda/subscriptions",
      "organizations_url": "https://api.github.com/users/TomKenda/orgs",
      "repos_url": "https://api.github.com/users/TomKenda/repos",
      "events_url": "https://api.github.com/users/TomKenda/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TomKenda/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "reactions": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/293/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/293/timeline",
    "performed_via_github_app": null,
    "state_reason": null
  },
  {
    "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/291",
    "repository_url": "https://api.github.com/repos/perrygeo/python-rasterstats",
    "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/291/labels{/name}",
    "comments_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/291/comments",
    "events_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/291/events",
    "html_url": "https://github.com/perrygeo/python-rasterstats/issues/291",
    "id": 1848760513,
    "node_id": "I_kwDOAMUVOs5uMdjB",
    "number": 291,
    "title": "Potential refactor for large speed boost",
    "user": {
      "login": "sdtaylor",
      "id": 12282062,
      "node_id": "MDQ6VXNlcjEyMjgyMDYy",
      "avatar_url": "https://avatars.githubusercontent.com/u/12282062?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdtaylor",
      "html_url": "https://github.com/sdtaylor",
      "followers_url": "https://api.github.com/users/sdtaylor/followers",
      "following_url": "https://api.github.com/users/sdtaylor/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdtaylor/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdtaylor/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdtaylor/subscriptions",
      "organizations_url": "https://api.github.com/users/sdtaylor/orgs",
      "repos_url": "https://api.github.com/users/sdtaylor/repos",
      "events_url": "https://api.github.com/users/sdtaylor/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdtaylor/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [

    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 5,
    "created_at": "2023-08-13T22:13:00Z",
    "updated_at": "2024-09-09T20:51:37Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "sub_issues_summary": {
      "total": 0,
      "completed": 0,
      "percent_completed": 0
    },
    "issue_dependencies_summary": {
      "blocked_by": 0,
      "total_blocked_by": 0,
      "blocking": 0,
      "total_blocking": 0
    },
    "body": "Hi, I had to do some optimizations recently for zonal stats on a very large number of polygons, and I thought the  method  might fit well here.  \r\nEssentially, instead of iterating thru each feature one at time, I use the rasterio.features.rasterize function to label each pixel of a raster with an id for all features. Then some array reshaping is used to create a sorted masked array, and all stats can then be generated in a vectorized fashion. It offers huge performance boosts when feature counts become large (see figure  below). I setup just a few stats (['mean','max','min','sum','std']) to compare with the original zonal method just as a proof of concept. \r\n\r\n![image](https://github.com/perrygeo/python-rasterstats/assets/12282062/9807df8b-bc77-47ee-9cd2-9d29072c4131)\r\n\r\nSome downsides of this:\r\n- It creates a copy of the original raster array, so will be more memory intensive with larger rasters. \r\n- It will load a larger chunk of the raster, also using more memory than 1 feature at a time.\r\n- it won't work with overlapping polygons as is.  \r\n- rasterizing all features at once means a pixel can only be assigned to a single feature, whereas before a pixel split by 2 polygons could be \"shared\". I suspect this is the cause in some slight differences in the final stats, but in my comparisons the differences are very tiny.  \r\n\r\nYou can see the code here https://github.com/sdtaylor/python-rasterstats/tree/zonal_refactor_poc  \r\nAnd a testing/comparison script here below.  \r\n@perrygeo any interest in having this in rasterstats somehow?  \r\n\r\n\r\n## Test code  \r\n```\r\nimport numpy as np\r\nimport rasterstats\r\nimport rasterio\r\n\r\nfrom shapely.geometry import Point, MultiPoint, box, MultiPolygon\r\nfrom shapely.ops import voronoi_diagram\r\n\r\nimport pandas as pd\r\n\r\nfrom timeit import default_timer as timer\r\n\r\ntest_tif = './tests/data/slope.tif'\r\n\r\n\r\ndef generate_random_polygons(n, bounds, seed=10):\r\n    \"\"\"\r\n    Use random points and voronoi diagrams to create\r\n    numerous polygon shapes completely covering everything\r\n    within the  bounds \r\n    \r\n\r\n    Parameters\r\n    ----------\r\n    n : int\r\n        number of polygons.\r\n    bounds : tuple\r\n        (minx, miny, maxx, maxy)\r\n    seed   : numeric\r\n        random seed\r\n\r\n    Returns\r\n    -------\r\n    [Polygon]\r\n        List of polygons\r\n\r\n    \"\"\"\r\n    minx, miny, maxx, maxy = bounds\r\n    \r\n    rng = np.random.default_rng(seed)\r\n    \r\n    points_x = rng.uniform(minx, maxx, n)\r\n    points_y = rng.uniform(miny, maxy, n)\r\n    \r\n    bounding_box = box(*bounds)\r\n    point_geom = MultiPoint([Point(x,y) for x,y in zip(points_x, points_y)])\r\n    geoms = [g.intersection(bounding_box) for g in voronoi_diagram(point_geom).geoms]\r\n    return geoms\r\n\r\nwith rasterio.open(test_tif) as src:\r\n    tif_profile = src.profile\r\n    tif_bounds  = src.bounds\r\n\r\n#----------------\r\n# Time both methods\r\nstats = ['mean','max','min','sum','std']\r\n\r\ntiming_results = []\r\ncomparison_results = {s:[] for s in stats}\r\n\r\n\r\nfor n_polygons in [10,50,100,500]:\r\n    print(f'testing with {n_polygons} polygons')\r\n    geoms = generate_random_polygons(n=n_polygons, bounds=tif_bounds, seed=None)\r\n    \r\n    # Drop some geoms so the raster is not 100% covered\r\n    geoms = geoms[5:]\r\n        \r\n    original_start = timer()\r\n    original_method = list(rasterstats.main.gen_zonal_stats(geoms, test_tif, stats=stats, all_touched=False))\r\n    original_end   = timer()\r\n    original_total = round(original_end - original_start,5)\r\n    \r\n    \r\n    exp_start = timer()\r\n    exp_method = rasterstats.main.gen_zonal_stats_experment(geoms, test_tif, stats=stats, all_touched=False)\r\n    exp_end  = timer()\r\n    exp_total = round(exp_end - exp_start, 5)\r\n    \r\n    timing_results.append({\r\n        'n_polygons' : n_polygons,\r\n        'original_time' :original_total,\r\n        'experimental_time' : exp_total\r\n        })\r\n\r\n    # Compare the difference in final numbers between the original method\r\n    # and new method.\r\n    for i,o,e in zip(range(len(original_method)), original_method, exp_method):\r\n        for s in stats:\r\n            if o[s] is None and e[s] is None:\r\n                comparison_results[s].append(0)\r\n            else:\r\n                comparison_results[s].append(o[s] - e[s])\r\n\r\n\r\npd.DataFrame(timing_results).plot(x='n_polygons', y=['original_time','experimental_time'],ylabel='seconds', kind='bar')\r\n\r\nfor stat, differences in comparison_results.items():\r\n    print(f'{stat} largest abs difference: {np.abs(differences).max()}')\r\n```",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/291/reactions",
      "total_count": 2,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 2,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/291/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "pinned_comment": null
  },
  {
    "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/288",
    "repository_url": "https://api.github.com/repos/perrygeo/python-rasterstats",
    "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/288/labels{/name}",
    "comments_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/288/comments",
    "events_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/288/events",
    "html_url": "https://github.com/perrygeo/python-rasterstats/issues/288",
    "id": 1662890421,
    "node_id": "I_kwDOAMUVOs5jHbG1",
    "number": 288,
    "title": "Unclear error handling for shp missing shx/dbf",
    "user": {
      "login": "sgoodm",
      "id": 9094862,
      "node_id": "MDQ6VXNlcjkwOTQ4NjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9094862?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sgoodm",
      "html_url": "https://github.com/sgoodm",
      "followers_url": "https://api.github.com/users/sgoodm/followers",
      "following_url": "https://api.github.com/users/sgoodm/following{/other_user}",
      "gists_url": "https://api.github.com/users/sgoodm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sgoodm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sgoodm/subscriptions",
      "organizations_url": "https://api.github.com/users/sgoodm/orgs",
      "repos_url": "https://api.github.com/users/sgoodm/repos",
      "events_url": "https://api.github.com/users/sgoodm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sgoodm/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [

    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 1,
    "created_at": "2023-04-11T16:53:17Z",
    "updated_at": "2023-04-11T22:06:49Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "sub_issues_summary": {
      "total": 0,
      "completed": 0,
      "percent_completed": 0
    },
    "issue_dependencies_summary": {
      "blocked_by": 0,
      "total_blocked_by": 0,
      "blocking": 0,
      "total_blocking": 0
    },
    "body": "When attempting to use a shapefile and you only have the .shp (not .shx / .dbf) the error you get is ultimately tied to trying to read a GeoJSON. \r\n\r\n```\r\nTraceback (most recent call last):\r\n  File “/opt/anaconda3/envs/geodata38/lib/python3.8/site-packages/rasterstats/io.py”, line 109, in read_features\r\n    mapping = json.loads(obj)\r\n  File “/opt/anaconda3/envs/geodata38/lib/python3.8/json/__init__.py”, line 357, in loads\r\n    return _default_decoder.decode(s)\r\n  File “/opt/anaconda3/envs/geodata38/lib/python3.8/json/decoder.py”, line 337, in decode\r\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\r\n  File “/opt/anaconda3/envs/geodata38/lib/python3.8/json/decoder.py”, line 355, in raw_decode\r\n    raise JSONDecodeError(“Expecting value”, s, err.value) from None\r\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\r\nDuring handling of the above exception, another exception occurred:\r\nTraceback (most recent call last):\r\n  ...\r\n  File “/opt/anaconda3/envs/geodata38/lib/python3.8/site-packages/rasterstats/io.py”, line 116, in read_features\r\n    features_iter = [parse_feature(obj)]\r\n  File “/opt/anaconda3/envs/geodata38/lib/python3.8/site-packages/rasterstats/io.py”, line 83, in parse_feature\r\n    raise ValueError(“Can’t parse %s as a geojson Feature object” % obj)\r\nValueError: Can’t parse /path/to/my.shp as a geojson Feature object\r\n\r\n```\r\n\r\nThis might fall into the realm of what Fiona should handle, but a relatively simple check when using a shapefile to make sure the .shp, .shx, and .dbf all exist would solve the issue.\r\n",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/288/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/288/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "pinned_comment": null
  },
  {
    "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/286",
    "repository_url": "https://api.github.com/repos/perrygeo/python-rasterstats",
    "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/286/labels{/name}",
    "comments_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/286/comments",
    "events_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/286/events",
    "html_url": "https://github.com/perrygeo/python-rasterstats/issues/286",
    "id": 1620510874,
    "node_id": "I_kwDOAMUVOs5glwia",
    "number": 286,
    "title": "Segmentation Fault (not necessarily caused by memory usage)",
    "user": {
      "login": "adamleemiller",
      "id": 70930980,
      "node_id": "MDQ6VXNlcjcwOTMwOTgw",
      "avatar_url": "https://avatars.githubusercontent.com/u/70930980?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/adamleemiller",
      "html_url": "https://github.com/adamleemiller",
      "followers_url": "https://api.github.com/users/adamleemiller/followers",
      "following_url": "https://api.github.com/users/adamleemiller/following{/other_user}",
      "gists_url": "https://api.github.com/users/adamleemiller/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/adamleemiller/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/adamleemiller/subscriptions",
      "organizations_url": "https://api.github.com/users/adamleemiller/orgs",
      "repos_url": "https://api.github.com/users/adamleemiller/repos",
      "events_url": "https://api.github.com/users/adamleemiller/events{/privacy}",
      "received_events_url": "https://api.github.com/users/adamleemiller/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [

    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 2,
    "created_at": "2023-03-12T21:02:02Z",
    "updated_at": "2023-04-06T03:53:13Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "sub_issues_summary": {
      "total": 0,
      "completed": 0,
      "percent_completed": 0
    },
    "issue_dependencies_summary": {
      "blocked_by": 0,
      "total_blocked_by": 0,
      "blocking": 0,
      "total_blocking": 0
    },
    "body": "**Describe the bug**\r\nPresumably on large sets of data, my script is segment faulting. Initially, we saw issues due to memory consumption and the script being killed due to OOM however we have since increased the physical memory to 32GB and added a 10GB SWAP file as well. The script ran successfully for some data sources but is now segfaulting again. The current TIFF being parsed is 4.38GB in size. There is only one polygon as we are pulling stats for an entire farm field which is approximately 82 acres in size.\r\n\r\nMachine Type: VPS\r\nMemory Allocation: 32GB\r\nSWAP File Allocation: 10GB\r\nOperating System: Ubuntu 22.04.2\r\nPython Version: 3.10.6\r\nPIP Version: 22.0.2\r\nVirtual Environment: Yes\r\nGDAL Version: 3.4.3\r\nrasterstats Version: 0.18.0\r\nOther Packages:\r\n      - affine==2.4.0\r\n      - attrs==22.2.0\r\n      - boto3==1.26.88\r\n      - botocore==1.29.88\r\n      - certifi==2022.12.7\r\n      - click==8.1.3\r\n      - click-plugins==1.1.1\r\n      - cligj==0.7.2\r\n      - Fiona==1.8.22\r\n      - GDAL==3.4.3\r\n      - geopandas==0.12.2\r\n      - humanfriendly==10.0\r\n      - jmespath==1.0.1\r\n      - munch==2.5.0\r\n      - mysql-connector-python==8.0.32\r\n      - numpy==1.24.2\r\n      - packaging==23.0\r\n      - pandas==1.5.3\r\n      - protobuf==3.20.3\r\n      - pyparsing==3.0.9\r\n      - pyproj==3.4.1\r\n      - python-dateutil==2.8.2\r\n      - python-dotenv==1.0.0\r\n      - pytz==2022.7.1\r\n      - rasterio==1.3.6\r\n      - rasterstats==0.18.0\r\n      - s3transfer==0.6.0\r\n      - shapely==2.0.1\r\n      - simplejson==3.18.3\r\n      - six==1.16.0\r\n      - snuggs==1.4.7\r\n      - urllib3==1.26.14\r\n\r\n```python\r\nzonal_stats(filepath_shapefile, filename_image, nodata=255, band=band[\"index\"], stats=[\"min\", \"max\", \"mean\", \"count\", \"sum\", \"std\", \"median\", \"majority\", \"minority\", \"unique\", \"range\", \"nodata\", \"percentile_25\", \"percentile_75\"])\r\n```\r\n\r\nActual Error / Output\r\n\r\n```\r\nFatal Python error: Segmentation fault\r\n\r\nCurrent thread 0x00007f1b3793d000 (most recent call first):\r\n  File \"/data/zonal/venv/lib/python3.10/site-packages/rasterstats/io.py\", line 356 in read\r\n  File \"/data/zonal/venv/lib/python3.10/site-packages/rasterstats/main.py\", line 175 in gen_zonal_stats\r\n  File \"/data/zonal/venv/lib/python3.10/site-packages/rasterstats/main.py\", line 40 in zonal_stats\r\n  File \"/data/zonal/main.py\", line 287 in do_get_statistics\r\n  File \"/data/zonal/main.py\", line 130 in main\r\n  File \"/data/zonal/main.py\", line 354 in <module>\r\n\r\nExtension modules: _mysql_connector, numpy.core._multiarray_umath, numpy.core._multiarray_tests, numpy.linalg._umath_linalg, numpy.fft._pocketfft_internal, numpy.random._common, numpy.random.bit_generator, numpy.random._bounded_integers, numpy.random._mt19937, numpy.random.mtrand, numpy.random._philox, numpy.random._pcg64, numpy.random._sfc64, numpy.random._generator, pandas._libs.tslibs.np_datetime, pandas._libs.tslibs.dtypes, pandas._libs.tslibs.base, pandas._libs.tslibs.nattype, pandas._libs.tslibs.timezones, pandas._libs.tslibs.tzconversion, pandas._libs.tslibs.ccalendar, pandas._libs.tslibs.fields, pandas._libs.tslibs.timedeltas, pandas._libs.tslibs.timestamps, pandas._libs.properties, pandas._libs.tslibs.offsets, pandas._libs.tslibs.parsing, pandas._libs.tslibs.conversion, pandas._libs.tslibs.period, pandas._libs.tslibs.vectorized, pandas._libs.ops_dispatch, pandas._libs.missing, pandas._libs.hashtable, pandas._libs.algos, pandas._libs.interval, pandas._libs.tslib, pandas._libs.lib, pandas._libs.hashing, pandas._libs.ops, pandas._libs.arrays, pandas._libs.index, pandas._libs.join, pandas._libs.sparse, pandas._libs.reduction, pandas._libs.indexing, pandas._libs.internals, pandas._libs.writers, pandas._libs.window.aggregations, pandas._libs.window.indexers, pandas._libs.reshape, pandas._libs.tslibs.strptime, pandas._libs.groupby, pandas._libs.testing, pandas._libs.parsers, pandas._libs.json, pyproj._compat, pyproj._datadir, pyproj._network, pyproj._geod, pyproj.list, pyproj._crs, pyproj._transformer, pyproj.database, pyproj._sync, shapely.lib, shapely._geos, shapely._geometry_helpers, osgeo._gdal, osgeo._gdalconst, osgeo._ogr, osgeo._osr, fiona._err, fiona._geometry, fiona._shim, fiona._env, fiona.schema, fiona.ogrext, fiona._crs, rasterio._version, rasterio._err, rasterio._filepath, rasterio._env, rasterio._transform, rasterio._base, rasterio.crs, rasterio._features, rasterio._warp, rasterio._io, simplejson._speedups (total: 89)\r\nSegmentation fault (core dumped)\r\n```\r\n\r\nThe script downloads the files from our storage provider then grabs the number of bands and their descriptions after which it loops through the bands and grabs the stats for each band using the same shapefile which was created from a GeoJSON object previously using geopandas:\r\n\r\n```python\r\n        geojson = gpd.read_file(filepath_geojson)\r\n        geojson.set_crs(\"EPSG:4326\")\r\n        crs = geojson.to_crs(3857)\r\n        crs.to_file(filename)\r\n```\r\n\r\nIt is possible that the coordinate reference system (CRS) is incorrect however I have not had an issue with other datasets using this same code (different fields but same GeoJSON).\r\n\r\nI am still new to Python itself but I have 20 years of development experience in other languages so I am not new to programming itself. If anyone can lend a hand as to where to go from here, I would appreciate it. I need to get this working flawlessly because I have nearly 2000 datasets that need to be processed in our production environment.\r\n\r\nThank you.",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/286/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/286/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "pinned_comment": null
  },
  {
    "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/285",
    "repository_url": "https://api.github.com/repos/perrygeo/python-rasterstats",
    "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/285/labels{/name}",
    "comments_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/285/comments",
    "events_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/285/events",
    "html_url": "https://github.com/perrygeo/python-rasterstats/issues/285",
    "id": 1606608409,
    "node_id": "I_kwDOAMUVOs5fwuYZ",
    "number": 285,
    "title": "causes memory overflow in the loop",
    "user": {
      "login": "mouzui",
      "id": 49224591,
      "node_id": "MDQ6VXNlcjQ5MjI0NTkx",
      "avatar_url": "https://avatars.githubusercontent.com/u/49224591?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mouzui",
      "html_url": "https://github.com/mouzui",
      "followers_url": "https://api.github.com/users/mouzui/followers",
      "following_url": "https://api.github.com/users/mouzui/following{/other_user}",
      "gists_url": "https://api.github.com/users/mouzui/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mouzui/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mouzui/subscriptions",
      "organizations_url": "https://api.github.com/users/mouzui/orgs",
      "repos_url": "https://api.github.com/users/mouzui/repos",
      "events_url": "https://api.github.com/users/mouzui/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mouzui/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [

    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 7,
    "created_at": "2023-03-02T11:14:07Z",
    "updated_at": "2024-07-24T15:40:32Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "sub_issues_summary": {
      "total": 0,
      "completed": 0,
      "percent_completed": 0
    },
    "issue_dependencies_summary": {
      "blocked_by": 0,
      "total_blocked_by": 0,
      "blocking": 0,
      "total_blocking": 0
    },
    "body": "This problem has been bothering me for a long time. I started by reading the csv containing the outline of 10 million polygons, then divided it into 1000 parts, created new polygons one by one and then did the zonal_stats.\r\n\r\nAs you can see in line 68 of the picture, the memory increases by a dozen mb while doing the zonal_stats and is not cleared by the end of the loop (it shows 1694.4 mb when going to the next loop, as it does at the end of this loop). \r\n\r\nMy computer's memory can't cope with the increase in the number of 10,000 cycles and the process is killed (over 140g, that is). I tried to split the data into 100 or 10,000 copies, but the problem still occurs and the process is still killed. \r\n\r\nWhat is the reason for this?\r\n\r\n\r\n![Snipaste_2023-03-02_19-21-40](https://user-images.githubusercontent.com/49224591/222414768-4055cea1-354c-49a4-b85b-cde0e262945b.jpg)",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/285/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/285/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "pinned_comment": null
  },
  {
    "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/271",
    "repository_url": "https://api.github.com/repos/perrygeo/python-rasterstats",
    "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/271/labels{/name}",
    "comments_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/271/comments",
    "events_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/271/events",
    "html_url": "https://github.com/perrygeo/python-rasterstats/issues/271",
    "id": 1533907659,
    "node_id": "I_kwDOAMUVOs5bbZLL",
    "number": 271,
    "title": "`properties_out` option",
    "user": {
      "login": "perrygeo",
      "id": 1151287,
      "node_id": "MDQ6VXNlcjExNTEyODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1151287?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/perrygeo",
      "html_url": "https://github.com/perrygeo",
      "followers_url": "https://api.github.com/users/perrygeo/followers",
      "following_url": "https://api.github.com/users/perrygeo/following{/other_user}",
      "gists_url": "https://api.github.com/users/perrygeo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/perrygeo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/perrygeo/subscriptions",
      "organizations_url": "https://api.github.com/users/perrygeo/orgs",
      "repos_url": "https://api.github.com/users/perrygeo/repos",
      "events_url": "https://api.github.com/users/perrygeo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/perrygeo/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [
      {
        "id": 56918397,
        "node_id": "MDU6TGFiZWw1NjkxODM5Nw==",
        "url": "https://api.github.com/repos/perrygeo/python-rasterstats/labels/enhancement",
        "name": "enhancement",
        "color": "84b6eb",
        "default": true,
        "description": null
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 1,
    "created_at": "2023-01-15T16:58:33Z",
    "updated_at": "2023-01-31T13:47:43Z",
    "closed_at": null,
    "author_association": "OWNER",
    "active_lock_reason": null,
    "sub_issues_summary": {
      "total": 0,
      "completed": 0,
      "percent_completed": 0
    },
    "issue_dependencies_summary": {
      "blocked_by": 0,
      "total_blocked_by": 0,
      "blocking": 0,
      "total_blocking": 0
    },
    "body": "The current approach provides two outputs\r\n\r\n`geojson_out=False` (default) gives you all requests stats as a list of dicts. None of the original properties or geometry is retained; you have to rely on the order to match them with the original vector features.\r\n\r\n`geojson_out=True` gives you the data back as geojson, complete with the original geometry, original properties, and stats added as new properties.\r\n\r\nSome use cases (outputting to a csv for example) require only the properties not the geometry itself. I propose a new `properties_out` flag that would yield a list of dicts containing the original properties plus stats only, no geom.\r\n\r\nWhy? The geometry can be costly to copy and store. If you just need the properties, this could be a useful optimization.",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/271/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/271/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "pinned_comment": null
  },
  {
    "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/268",
    "repository_url": "https://api.github.com/repos/perrygeo/python-rasterstats",
    "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/268/labels{/name}",
    "comments_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/268/comments",
    "events_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/268/events",
    "html_url": "https://github.com/perrygeo/python-rasterstats/pull/268",
    "id": 1436695042,
    "node_id": "PR_kwDOAMUVOs5CPiZO",
    "number": 268,
    "title": "Performance optimizations",
    "user": {
      "login": "groutr",
      "id": 10678620,
      "node_id": "MDQ6VXNlcjEwNjc4NjIw",
      "avatar_url": "https://avatars.githubusercontent.com/u/10678620?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/groutr",
      "html_url": "https://github.com/groutr",
      "followers_url": "https://api.github.com/users/groutr/followers",
      "following_url": "https://api.github.com/users/groutr/following{/other_user}",
      "gists_url": "https://api.github.com/users/groutr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/groutr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/groutr/subscriptions",
      "organizations_url": "https://api.github.com/users/groutr/orgs",
      "repos_url": "https://api.github.com/users/groutr/repos",
      "events_url": "https://api.github.com/users/groutr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/groutr/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [
      {
        "id": 2393517825,
        "node_id": "MDU6TGFiZWwyMzkzNTE3ODI1",
        "url": "https://api.github.com/repos/perrygeo/python-rasterstats/labels/Needs%20Additional%20Info",
        "name": "Needs Additional Info",
        "color": "c5def5",
        "default": false,
        "description": ""
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 7,
    "created_at": "2022-11-04T22:21:13Z",
    "updated_at": "2023-02-22T01:07:45Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/pulls/268",
      "html_url": "https://github.com/perrygeo/python-rasterstats/pull/268",
      "diff_url": "https://github.com/perrygeo/python-rasterstats/pull/268.diff",
      "patch_url": "https://github.com/perrygeo/python-rasterstats/pull/268.patch",
      "merged_at": null
    },
    "body": "A small collection of performance enhancements aimed at reducing the number of times the data is traversed.\r\n\r\nAlso improved percentile computation by computing them all at once instead of one at a time (and avoid recreating the compressed array each time).",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/268/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/268/timeline",
    "performed_via_github_app": null,
    "state_reason": null
  },
  {
    "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/255",
    "repository_url": "https://api.github.com/repos/perrygeo/python-rasterstats",
    "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/255/labels{/name}",
    "comments_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/255/comments",
    "events_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/255/events",
    "html_url": "https://github.com/perrygeo/python-rasterstats/pull/255",
    "id": 1129720361,
    "node_id": "PR_kwDOAMUVOs4yXNt4",
    "number": 255,
    "title": "Multigeometries",
    "user": {
      "login": "yyu1",
      "id": 7562609,
      "node_id": "MDQ6VXNlcjc1NjI2MDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7562609?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yyu1",
      "html_url": "https://github.com/yyu1",
      "followers_url": "https://api.github.com/users/yyu1/followers",
      "following_url": "https://api.github.com/users/yyu1/following{/other_user}",
      "gists_url": "https://api.github.com/users/yyu1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yyu1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yyu1/subscriptions",
      "organizations_url": "https://api.github.com/users/yyu1/orgs",
      "repos_url": "https://api.github.com/users/yyu1/repos",
      "events_url": "https://api.github.com/users/yyu1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yyu1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [
      {
        "id": 2393517825,
        "node_id": "MDU6TGFiZWwyMzkzNTE3ODI1",
        "url": "https://api.github.com/repos/perrygeo/python-rasterstats/labels/Needs%20Additional%20Info",
        "name": "Needs Additional Info",
        "color": "c5def5",
        "default": false,
        "description": ""
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 1,
    "created_at": "2022-02-10T09:40:36Z",
    "updated_at": "2023-01-15T05:03:03Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/pulls/255",
      "html_url": "https://github.com/perrygeo/python-rasterstats/pull/255",
      "diff_url": "https://github.com/perrygeo/python-rasterstats/pull/255.diff",
      "patch_url": "https://github.com/perrygeo/python-rasterstats/pull/255.patch",
      "merged_at": null
    },
    "body": "Here is the code to enable the \"split_multi_geom\" option for zonal_stats as we discussed.  It reads individual polygons in a multipolygon type of geometry to save memory usage.\r\n\r\nI only did a bare minimum of testing against the slope.tif and multipolygon.shp inside the test directory.  I don't really have the data and time to do more extensive testing.  So perhaps some of the users asking for this feature can do some tests.",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/255/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/255/timeline",
    "performed_via_github_app": null,
    "state_reason": null
  },
  {
    "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/246",
    "repository_url": "https://api.github.com/repos/perrygeo/python-rasterstats",
    "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/246/labels{/name}",
    "comments_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/246/comments",
    "events_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/246/events",
    "html_url": "https://github.com/perrygeo/python-rasterstats/issues/246",
    "id": 1002157350,
    "node_id": "I_kwDOAMUVOs47u7Um",
    "number": 246,
    "title": "zonalstats includes numpy masked data areas in stats calculations",
    "user": {
      "login": "sebastianclarke",
      "id": 10194294,
      "node_id": "MDQ6VXNlcjEwMTk0Mjk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/10194294?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sebastianclarke",
      "html_url": "https://github.com/sebastianclarke",
      "followers_url": "https://api.github.com/users/sebastianclarke/followers",
      "following_url": "https://api.github.com/users/sebastianclarke/following{/other_user}",
      "gists_url": "https://api.github.com/users/sebastianclarke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sebastianclarke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sebastianclarke/subscriptions",
      "organizations_url": "https://api.github.com/users/sebastianclarke/orgs",
      "repos_url": "https://api.github.com/users/sebastianclarke/repos",
      "events_url": "https://api.github.com/users/sebastianclarke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sebastianclarke/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [

    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 0,
    "created_at": "2021-09-21T10:08:29Z",
    "updated_at": "2021-09-21T10:08:29Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "sub_issues_summary": {
      "total": 0,
      "completed": 0,
      "percent_completed": 0
    },
    "issue_dependencies_summary": {
      "blocked_by": 0,
      "total_blocked_by": 0,
      "blocking": 0,
      "total_blocking": 0
    },
    "body": "**Describe the bug**\r\nIssue occurs when calling the `zonal_stats` function and passing a numpy array and affine, rather than a geo-referenced raster. If you have previously used numpy.ma to mask a portion of the data, that portion of the data is still included in stats calculation. I was expecting that pixels masked in this manner would be ignored during stats calculation, in the same way that nodata pixels are.\r\n\r\nMy current workaround is to set these pixels explicitly to the nodata value, which then results in them being discounted accordingly, but this is a little in-elegant, and more to the point I think the expectation is that, if zonal_stats supports numpy data, it should respect any masks already applied. This was certainly my expectation, and I've seen one or two other reports online of people being caught out by this.\r\n\r\n**To Reproduce**\r\n\r\nThe below example shows roughly how to reproduce. Naturally it's trivial, and you would never do this in anger, you would just pass the raster directly to the zonal_stats function. Assume in any actual example, we are doing something else to the raster data in numpy-land other than simply reading it and masking it. Note that it does require you provide your own test data (a raster and intersecting geometry).\r\n\r\n```python\r\nimport rasterio\r\nfrom rasterstats import zonal_stats\r\nfrom numpy import ma\r\n\r\nwith rasterio.open(\"somerasterdataset.tif\") as my_raster:\r\n    my_data = my_raster.read(1)    # 8-bit, unsigned int, values 0-255\r\n    nodata = my_raster.nodata\r\n    affine = my_raster.transform\r\n\r\nmasked_data = ma.masked_greater(my_data, 100)\r\n\r\nstats = zonal_stats(\r\n    geometry,\r\n    masked_data,\r\n    affine=affine,\r\n    nodata=nodata,\r\n    stats=['mean', 'count']\r\n    all_touched=True,\r\n )    # Still includes pixels > 100, so mean is too high\r\n\r\nmy_data[my_data>100] = nodata\r\n\r\nstats = zonal_stats(\r\n    geometry,\r\n    my_data,\r\n    affine=affine,\r\n    nodata=nodata,\r\n    stats=['mean', 'count']\r\n    all_touched=True,\r\n )    # Works as I expect\r\n\r\n```\r\n",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/246/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/246/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "pinned_comment": null
  },
  {
    "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/243",
    "repository_url": "https://api.github.com/repos/perrygeo/python-rasterstats",
    "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/243/labels{/name}",
    "comments_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/243/comments",
    "events_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/243/events",
    "html_url": "https://github.com/perrygeo/python-rasterstats/issues/243",
    "id": 876008141,
    "node_id": "MDU6SXNzdWU4NzYwMDgxNDE=",
    "number": 243,
    "title": "nodata when geometry has empty rasterization",
    "user": {
      "login": "nathanjmcdougall",
      "id": 18602289,
      "node_id": "MDQ6VXNlcjE4NjAyMjg5",
      "avatar_url": "https://avatars.githubusercontent.com/u/18602289?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nathanjmcdougall",
      "html_url": "https://github.com/nathanjmcdougall",
      "followers_url": "https://api.github.com/users/nathanjmcdougall/followers",
      "following_url": "https://api.github.com/users/nathanjmcdougall/following{/other_user}",
      "gists_url": "https://api.github.com/users/nathanjmcdougall/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nathanjmcdougall/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nathanjmcdougall/subscriptions",
      "organizations_url": "https://api.github.com/users/nathanjmcdougall/orgs",
      "repos_url": "https://api.github.com/users/nathanjmcdougall/repos",
      "events_url": "https://api.github.com/users/nathanjmcdougall/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nathanjmcdougall/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [

    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 0,
    "created_at": "2021-05-05T03:29:54Z",
    "updated_at": "2021-05-05T03:33:57Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "sub_issues_summary": {
      "total": 0,
      "completed": 0,
      "percent_completed": 0
    },
    "issue_dependencies_summary": {
      "blocked_by": 0,
      "total_blocked_by": 0,
      "blocking": 0,
      "total_blocking": 0
    },
    "body": "**Bug Description**\r\nWhen computing the `'nodata'` count as one of the statistics for `zonal_stats`, if a geometry's rasterization does not include any pixels at all then:\r\n-  a UserWarning will be raised by numpy and\r\n- the `'nodata'` value will be NaN.\r\n\r\nOf course, it is fine to interpret NaN as zero, but for consistency this should probably be:\r\n-  None, which is the value returned for `'max'`, `'mean'`, etc., or\r\n- 0, which is the value returned for `'count'`, and probably makes conceptual sense in this case because `'nodata'` functions as a count of pixels similarly to `'count'`.\r\n\r\n**Example**\r\n\r\nI have created a small `.tif` and `.shp` file illustrating this:\r\n[example.zip](https://github.com/perrygeo/python-rasterstats/files/6424795/example.zip)\r\n\r\nIn this example, the polygon in the shapefile is too thin to fully encompass any pixels' centroids, using the default centroid rasterization strategy leads to an \"empty\" rasterization and the following:\r\n```python\r\nimport rasterstats\r\nrasterstats.zonal_stats(\"example.shp\", \"small_raster.tif\", stats='nodata')\r\n```\r\n```\r\nC:\\Users\\nathan\\Anaconda3\\lib\\site-packages\\rasterstats\\main.py:260: UserWarning: Warning: converting a masked element to nan.\r\n  feature_stats['nodata'] = float((featmasked == fsrc.nodata).sum())\r\n>>> [{'nodata': nan}]\r\n```\r\n\r\n**Explanation for what is happening**\r\n\r\nThe issue lies in the masking performed here:\r\nhttps://github.com/perrygeo/python-rasterstats/blob/aa4130e2ea03c9227b6793b7fe94adb9485bcb58/src/rasterstats/main.py#L261-L264\r\n\r\nWhen trying to take `.sum()` over a _fully_ masked array, numpy Masked Arrays will return `numpy.ma.masked` instead of zero.\r\nIf `rv_array` is all False (i.e. the rasterization doesn't include any pixels at all), then `featmasked` will be entirely masked, and so `(featmasked == 0).sum()` will be equal to `numpy.ma.masked`. Then, trying to convert to a float using `float(numpy.ma.masked)` raises the warning and returns np.nan, instead of zero. \r\n\r\nExamples:\r\n\r\n```python\r\nimport numpy as np\r\n# Partially masked (usual case):\r\nrv_array = np.array([[False,True,False,False],[False,False,False,False]])\r\nfsrc_array = np.array([[0,1,2,3],[4,5,6,7]])\r\nfeatmasked = np.ma.MaskedArray(fsrc_array, mask=(~rv_array))\r\nfloat((featmasked == 0).sum())\r\n>>> 0.0\r\n```\r\n\r\n```python\r\n# Fully masked:\r\nrv_array = np.array([[False,False,False,False],[False,False,False,False]])\r\nfsrc_array = np.array([[0,1,2,3],[4,5,6,7]])\r\nfeatmasked = np.ma.MaskedArray(fsrc_array, mask=(~rv_array))\r\nx = (featmasked == 0).sum()\r\nnp.ma.is_masked(x)\r\n>>> True\r\n```\r\n```python\r\nfloat(x)\r\nUserWarning: Warning: converting a masked element to nan.\r\n>>> nan\r\n```\r\n\r\n**Install info**\r\nI'm using rasterstats 0.14.0 with numpy 1.19.2 on Anaconda.",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/243/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/243/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "pinned_comment": null
  },
  {
    "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/227",
    "repository_url": "https://api.github.com/repos/perrygeo/python-rasterstats",
    "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/227/labels{/name}",
    "comments_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/227/comments",
    "events_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/227/events",
    "html_url": "https://github.com/perrygeo/python-rasterstats/issues/227",
    "id": 724611116,
    "node_id": "MDU6SXNzdWU3MjQ2MTExMTY=",
    "number": 227,
    "title": "Poor performance for boundless reads",
    "user": {
      "login": "AsgerPetersen",
      "id": 1392735,
      "node_id": "MDQ6VXNlcjEzOTI3MzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1392735?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AsgerPetersen",
      "html_url": "https://github.com/AsgerPetersen",
      "followers_url": "https://api.github.com/users/AsgerPetersen/followers",
      "following_url": "https://api.github.com/users/AsgerPetersen/following{/other_user}",
      "gists_url": "https://api.github.com/users/AsgerPetersen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AsgerPetersen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AsgerPetersen/subscriptions",
      "organizations_url": "https://api.github.com/users/AsgerPetersen/orgs",
      "repos_url": "https://api.github.com/users/AsgerPetersen/repos",
      "events_url": "https://api.github.com/users/AsgerPetersen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AsgerPetersen/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [

    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 3,
    "created_at": "2020-10-19T13:29:37Z",
    "updated_at": "2020-11-24T15:44:06Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "sub_issues_summary": {
      "total": 0,
      "completed": 0,
      "percent_completed": 0
    },
    "issue_dependencies_summary": {
      "blocked_by": 0,
      "total_blocked_by": 0,
      "blocking": 0,
      "total_blocking": 0
    },
    "body": "I would like to propose exposing a way to toggle boundless reading for two reasons:\r\n\r\n1) There are use cases where features being outside the raster extent is an error. For example in my job I am provided with countrywide rasters and I collect statistics from these rasters for buildings and roads. If a feature is outside the raster extent something is wrong with either the feature or the raster.\r\n\r\n2) Enabling boundless reading in rasterio seriously degrades performance in some cases. It looks like the dataset is opened for each feature and the block cache is effectively disabled when using boundless reading. This gist https://gist.github.com/AsgerPetersen/6f9c8120b85e462ccbc26191a2117b3a demonstrates a performance improvement about 50x when disabling boundless reading. On my real world data the performance improvement is in the order of 200x.\r\n\r\nI implemented it for my own usage here: https://github.com/AsgerPetersen/python-rasterstats/commit/c37509456f5f7d9b4bf6b1183c01d701e0b9a4bb.\r\n",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/227/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/227/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "pinned_comment": null
  },
  {
    "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/215",
    "repository_url": "https://api.github.com/repos/perrygeo/python-rasterstats",
    "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/215/labels{/name}",
    "comments_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/215/comments",
    "events_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/215/events",
    "html_url": "https://github.com/perrygeo/python-rasterstats/issues/215",
    "id": 613134255,
    "node_id": "MDU6SXNzdWU2MTMxMzQyNTU=",
    "number": 215,
    "title": "zonal_stats function returns 'infinity' value ",
    "user": {
      "login": "shubham-scisar",
      "id": 11288303,
      "node_id": "MDQ6VXNlcjExMjg4MzAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/11288303?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shubham-scisar",
      "html_url": "https://github.com/shubham-scisar",
      "followers_url": "https://api.github.com/users/shubham-scisar/followers",
      "following_url": "https://api.github.com/users/shubham-scisar/following{/other_user}",
      "gists_url": "https://api.github.com/users/shubham-scisar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shubham-scisar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shubham-scisar/subscriptions",
      "organizations_url": "https://api.github.com/users/shubham-scisar/orgs",
      "repos_url": "https://api.github.com/users/shubham-scisar/repos",
      "events_url": "https://api.github.com/users/shubham-scisar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shubham-scisar/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [
      {
        "id": 2393517825,
        "node_id": "MDU6TGFiZWwyMzkzNTE3ODI1",
        "url": "https://api.github.com/repos/perrygeo/python-rasterstats/labels/Needs%20Additional%20Info",
        "name": "Needs Additional Info",
        "color": "c5def5",
        "default": false,
        "description": ""
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 3,
    "created_at": "2020-05-06T08:16:59Z",
    "updated_at": "2020-10-02T05:18:26Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "sub_issues_summary": {
      "total": 0,
      "completed": 0,
      "percent_completed": 0
    },
    "issue_dependencies_summary": {
      "blocked_by": 0,
      "total_blocked_by": 0,
      "blocking": 0,
      "total_blocking": 0
    },
    "body": "zonal_stats function returns infinity when calculating mean for some geometries. ",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/215/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/215/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "pinned_comment": null
  },
  {
    "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/214",
    "repository_url": "https://api.github.com/repos/perrygeo/python-rasterstats",
    "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/214/labels{/name}",
    "comments_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/214/comments",
    "events_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/214/events",
    "html_url": "https://github.com/perrygeo/python-rasterstats/issues/214",
    "id": 573598827,
    "node_id": "MDU6SXNzdWU1NzM1OTg4Mjc=",
    "number": 214,
    "title": "Using rasterstats with multigeometries on very large datasets",
    "user": {
      "login": "yyu1",
      "id": 7562609,
      "node_id": "MDQ6VXNlcjc1NjI2MDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7562609?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yyu1",
      "html_url": "https://github.com/yyu1",
      "followers_url": "https://api.github.com/users/yyu1/followers",
      "following_url": "https://api.github.com/users/yyu1/following{/other_user}",
      "gists_url": "https://api.github.com/users/yyu1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yyu1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yyu1/subscriptions",
      "organizations_url": "https://api.github.com/users/yyu1/orgs",
      "repos_url": "https://api.github.com/users/yyu1/repos",
      "events_url": "https://api.github.com/users/yyu1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yyu1/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [
      {
        "id": 56918397,
        "node_id": "MDU6TGFiZWw1NjkxODM5Nw==",
        "url": "https://api.github.com/repos/perrygeo/python-rasterstats/labels/enhancement",
        "name": "enhancement",
        "color": "84b6eb",
        "default": true,
        "description": null
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 9,
    "created_at": "2020-03-01T19:13:39Z",
    "updated_at": "2022-02-11T14:48:49Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "sub_issues_summary": {
      "total": 0,
      "completed": 0,
      "percent_completed": 0
    },
    "issue_dependencies_summary": {
      "blocked_by": 0,
      "total_blocked_by": 0,
      "blocking": 0,
      "total_blocking": 0
    },
    "body": "Hi perrygeo,\r\nI have used rasterstats with some very large raster data (100m resolution global data) using zonal_stats, and I have ran into issues.  I was able to find the problem and made some modifications on my fork of rasterstats that seems to be working.\r\n\r\nHowever, I didn't think about if it might break other intended functions of rasterstats, so I wanted to open an issue here to discuss what are your thoughts and your intended usage types for python-rasterstats.\r\n\r\nTypically, when I wanted to do some type of zonal statistics on very large raster sets, I write my own C++ code using boost::accumulators.  I think that is really the best way to calculate statistics on such large datasets, and it runs circles around python in terms of speed.  However, I thought I would give rasterstats a try since I have used it on some smaller datasets.\r\n\r\nI ran into the following problem:\r\nRunning zonal_stats would have the python memory usage balloon up until the kernel kills the process.  Activity monitor was showing memory usage > 100Gb.\r\n\r\nDigging into the code further, I found what was happening was due to MultiPolygon types in the vector file.  It happens in this portion:\r\n```\r\ngeom = shape(feat['geometry'])\r\nif 'Point' in geom.type:\r\n    geom = boxify_points(geom, rast)\r\ngeom_bounds = tuple(geom.bounds)\r\nfsrc = rast.read(bounds=geom_bounds)\r\n```\r\nThe problem is, let's say I have a very large raster data (mine is about 130 Gb), and there is a MultiPolygon feature that has polygons spread out around almost the entirety of this raster.\r\nIn this case `geom.bounds` is going to give a giant rectangle that includes all the polygons, even though the actual area of coverage for those polygons are not that big.\r\nThe code then tries to read all that into memory, and later on, it gets even worse as the code tries to make nodata and NAN masks of the same size.  This approach is never going to work with large rasters with MultiPolygons spread out.\r\n\r\nThe way I fixed this was to iterate through each polygon in a MultiPolygon, read the raster into numpy array, flatten that array into 1D, go to next polygon, do the same, and append the 1D array to the end.  The flattening is to make the append operation possible, and we don't really need the relative positions of the pixels in 2D space.  The same is done for the nodata array and NAN array.\r\nAt the end, just go back to the same code to calculate the statistics on the 1D array.\r\n\r\nThe questions now is:\r\n1. Does the flattening break other intended uses of zonal_stats?\r\n2. Does it even make sense to do this for python-rasterstats?  Perhaps this use case is better suited for a C/C++ program.\r\n\r\nHope you can provide some feedback regarding this approach and your intended usage for python-rasterstats.",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/214/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/214/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "pinned_comment": null
  },
  {
    "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/208",
    "repository_url": "https://api.github.com/repos/perrygeo/python-rasterstats",
    "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/208/labels{/name}",
    "comments_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/208/comments",
    "events_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/208/events",
    "html_url": "https://github.com/perrygeo/python-rasterstats/issues/208",
    "id": 556568744,
    "node_id": "MDU6SXNzdWU1NTY1Njg3NDQ=",
    "number": 208,
    "title": "handling remote files (or setting rasterio/gdal context)",
    "user": {
      "login": "knaaptime",
      "id": 4213368,
      "node_id": "MDQ6VXNlcjQyMTMzNjg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4213368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/knaaptime",
      "html_url": "https://github.com/knaaptime",
      "followers_url": "https://api.github.com/users/knaaptime/followers",
      "following_url": "https://api.github.com/users/knaaptime/following{/other_user}",
      "gists_url": "https://api.github.com/users/knaaptime/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/knaaptime/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/knaaptime/subscriptions",
      "organizations_url": "https://api.github.com/users/knaaptime/orgs",
      "repos_url": "https://api.github.com/users/knaaptime/repos",
      "events_url": "https://api.github.com/users/knaaptime/events{/privacy}",
      "received_events_url": "https://api.github.com/users/knaaptime/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [
      {
        "id": 56918397,
        "node_id": "MDU6TGFiZWw1NjkxODM5Nw==",
        "url": "https://api.github.com/repos/perrygeo/python-rasterstats/labels/enhancement",
        "name": "enhancement",
        "color": "84b6eb",
        "default": true,
        "description": null
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 2,
    "created_at": "2020-01-29T00:27:39Z",
    "updated_at": "2022-03-17T15:54:19Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "sub_issues_summary": {
      "total": 0,
      "completed": 0,
      "percent_completed": 0
    },
    "issue_dependencies_summary": {
      "blocked_by": 0,
      "total_blocked_by": 0,
      "blocking": 0,
      "total_blocking": 0
    },
    "body": "Hi,\r\nthanks for this great package. I'm wondering if it's possible to pass an *open* raster (as opposed to simply the path) to zonalstats (without converting to `ndarray` first). \r\n\r\nMy use case is that I'm reading a raster file from a public s3 bucket, which requires the following rasterio context:\r\n\r\n```\r\nwith rasterio.env.Env(aws_unsigned=True):\r\n\tr = rasterio.open(\"s3://path-to-raster.tif)\r\n```\r\n\r\nwhich works great by itself. But now I need to calculate zonal stats and I cannot make `rs.zonal_stats` use the rasterio environment. Would it be possible to modify the `rs.zonal_stats` so that it accepts an open `rasterio.DatasetReader`? (or allow passing the context)\r\n\r\ne.g.\r\n\r\n```python\r\nwith rasterio.env.Env(aws_unsigned=True):\r\n\topen_raster = rasterio.open(\"s3://path-to-raster)\r\n\tzonal_gjson = rs.zonal_stats(\r\n\t                geodataframe, open_raster, prefix=\"Type_\", geojson_out=True, categorical=True\r\n\t            )\r\n```\r\n",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/208/reactions",
      "total_count": 4,
      "+1": 4,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/208/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "pinned_comment": null
  },
  {
    "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/206",
    "repository_url": "https://api.github.com/repos/perrygeo/python-rasterstats",
    "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/206/labels{/name}",
    "comments_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/206/comments",
    "events_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/206/events",
    "html_url": "https://github.com/perrygeo/python-rasterstats/issues/206",
    "id": 547003861,
    "node_id": "MDU6SXNzdWU1NDcwMDM4NjE=",
    "number": 206,
    "title": "Progress Bar on Zonal_Stats",
    "user": {
      "login": "lauzadis",
      "id": 30608308,
      "node_id": "MDQ6VXNlcjMwNjA4MzA4",
      "avatar_url": "https://avatars.githubusercontent.com/u/30608308?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lauzadis",
      "html_url": "https://github.com/lauzadis",
      "followers_url": "https://api.github.com/users/lauzadis/followers",
      "following_url": "https://api.github.com/users/lauzadis/following{/other_user}",
      "gists_url": "https://api.github.com/users/lauzadis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lauzadis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lauzadis/subscriptions",
      "organizations_url": "https://api.github.com/users/lauzadis/orgs",
      "repos_url": "https://api.github.com/users/lauzadis/repos",
      "events_url": "https://api.github.com/users/lauzadis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lauzadis/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [
      {
        "id": 56918397,
        "node_id": "MDU6TGFiZWw1NjkxODM5Nw==",
        "url": "https://api.github.com/repos/perrygeo/python-rasterstats/labels/enhancement",
        "name": "enhancement",
        "color": "84b6eb",
        "default": true,
        "description": null
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 5,
    "created_at": "2020-01-08T17:32:15Z",
    "updated_at": "2024-09-12T23:34:32Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "sub_issues_summary": {
      "total": 0,
      "completed": 0,
      "percent_completed": 0
    },
    "issue_dependencies_summary": {
      "blocked_by": 0,
      "total_blocked_by": 0,
      "blocking": 0,
      "total_blocking": 0
    },
    "body": "Is there any plan or interest to add a progress bar to zonal_stats? When working with large data-sets, the function can take a long time to complete, sometimes hanging part of the way through.\r\n\r\nA progress bar would be a good way to see that the function is still running and has not crashed.\r\n\r\ntqdm could be a good candidate for this, it would just [wrap around the feature iteration in this line of code](https://github.com/perrygeo/python-rasterstats/blob/f967c1d320eb3bfd8b4e3bd01218256877af65b0/src/rasterstats/main.py#L148).",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/206/reactions",
      "total_count": 4,
      "+1": 4,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/206/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "pinned_comment": null
  },
  {
    "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/188",
    "repository_url": "https://api.github.com/repos/perrygeo/python-rasterstats",
    "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/188/labels{/name}",
    "comments_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/188/comments",
    "events_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/188/events",
    "html_url": "https://github.com/perrygeo/python-rasterstats/issues/188",
    "id": 443098156,
    "node_id": "MDU6SXNzdWU0NDMwOTgxNTY=",
    "number": 188,
    "title": "how to filter specified value？",
    "user": {
      "login": "lwk1542",
      "id": 16815156,
      "node_id": "MDQ6VXNlcjE2ODE1MTU2",
      "avatar_url": "https://avatars.githubusercontent.com/u/16815156?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lwk1542",
      "html_url": "https://github.com/lwk1542",
      "followers_url": "https://api.github.com/users/lwk1542/followers",
      "following_url": "https://api.github.com/users/lwk1542/following{/other_user}",
      "gists_url": "https://api.github.com/users/lwk1542/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lwk1542/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lwk1542/subscriptions",
      "organizations_url": "https://api.github.com/users/lwk1542/orgs",
      "repos_url": "https://api.github.com/users/lwk1542/repos",
      "events_url": "https://api.github.com/users/lwk1542/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lwk1542/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [
      {
        "id": 56918398,
        "node_id": "MDU6TGFiZWw1NjkxODM5OA==",
        "url": "https://api.github.com/repos/perrygeo/python-rasterstats/labels/invalid",
        "name": "invalid",
        "color": "e6e6e6",
        "default": true,
        "description": null
      },
      {
        "id": 2393517825,
        "node_id": "MDU6TGFiZWwyMzkzNTE3ODI1",
        "url": "https://api.github.com/repos/perrygeo/python-rasterstats/labels/Needs%20Additional%20Info",
        "name": "Needs Additional Info",
        "color": "c5def5",
        "default": false,
        "description": ""
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 1,
    "created_at": "2019-05-12T12:20:10Z",
    "updated_at": "2020-10-02T05:55:33Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "sub_issues_summary": {
      "total": 0,
      "completed": 0,
      "percent_completed": 0
    },
    "issue_dependencies_summary": {
      "blocked_by": 0,
      "total_blocked_by": 0,
      "blocking": 0,
      "total_blocking": 0
    },
    "body": "such as NaN, infinite, and percentile_2%-98%  or others",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/188/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/188/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "pinned_comment": null
  },
  {
    "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/169",
    "repository_url": "https://api.github.com/repos/perrygeo/python-rasterstats",
    "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/169/labels{/name}",
    "comments_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/169/comments",
    "events_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/169/events",
    "html_url": "https://github.com/perrygeo/python-rasterstats/pull/169",
    "id": 343409195,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MjAzMDU4OTc5",
    "number": 169,
    "title": "add area & area_percent statistics",
    "user": {
      "login": "diversoft",
      "id": 2303685,
      "node_id": "MDQ6VXNlcjIzMDM2ODU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2303685?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/diversoft",
      "html_url": "https://github.com/diversoft",
      "followers_url": "https://api.github.com/users/diversoft/followers",
      "following_url": "https://api.github.com/users/diversoft/following{/other_user}",
      "gists_url": "https://api.github.com/users/diversoft/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/diversoft/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/diversoft/subscriptions",
      "organizations_url": "https://api.github.com/users/diversoft/orgs",
      "repos_url": "https://api.github.com/users/diversoft/repos",
      "events_url": "https://api.github.com/users/diversoft/events{/privacy}",
      "received_events_url": "https://api.github.com/users/diversoft/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [
      {
        "id": 2393517825,
        "node_id": "MDU6TGFiZWwyMzkzNTE3ODI1",
        "url": "https://api.github.com/repos/perrygeo/python-rasterstats/labels/Needs%20Additional%20Info",
        "name": "Needs Additional Info",
        "color": "c5def5",
        "default": false,
        "description": ""
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 1,
    "created_at": "2018-07-22T14:12:46Z",
    "updated_at": "2023-06-28T21:29:14Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/pulls/169",
      "html_url": "https://github.com/perrygeo/python-rasterstats/pull/169",
      "diff_url": "https://github.com/perrygeo/python-rasterstats/pull/169.diff",
      "patch_url": "https://github.com/perrygeo/python-rasterstats/pull/169.patch",
      "merged_at": null
    },
    "body": null,
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/169/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/169/timeline",
    "performed_via_github_app": null,
    "state_reason": null
  },
  {
    "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/165",
    "repository_url": "https://api.github.com/repos/perrygeo/python-rasterstats",
    "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/165/labels{/name}",
    "comments_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/165/comments",
    "events_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/165/events",
    "html_url": "https://github.com/perrygeo/python-rasterstats/issues/165",
    "id": 308117777,
    "node_id": "MDU6SXNzdWUzMDgxMTc3Nzc=",
    "number": 165,
    "title": "Warning about float dtype",
    "user": {
      "login": "perrygeo",
      "id": 1151287,
      "node_id": "MDQ6VXNlcjExNTEyODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1151287?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/perrygeo",
      "html_url": "https://github.com/perrygeo",
      "followers_url": "https://api.github.com/users/perrygeo/followers",
      "following_url": "https://api.github.com/users/perrygeo/following{/other_user}",
      "gists_url": "https://api.github.com/users/perrygeo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/perrygeo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/perrygeo/subscriptions",
      "organizations_url": "https://api.github.com/users/perrygeo/orgs",
      "repos_url": "https://api.github.com/users/perrygeo/repos",
      "events_url": "https://api.github.com/users/perrygeo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/perrygeo/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [
      {
        "id": 56918395,
        "node_id": "MDU6TGFiZWw1NjkxODM5NQ==",
        "url": "https://api.github.com/repos/perrygeo/python-rasterstats/labels/bug",
        "name": "bug",
        "color": "fc2929",
        "default": true,
        "description": null
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 0,
    "created_at": "2018-03-23T17:29:04Z",
    "updated_at": "2020-10-02T05:59:40Z",
    "closed_at": null,
    "author_association": "OWNER",
    "active_lock_reason": null,
    "sub_issues_summary": {
      "total": 0,
      "completed": 0,
      "percent_completed": 0
    },
    "issue_dependencies_summary": {
      "blocked_by": 0,
      "total_blocked_by": 0,
      "blocking": 0,
      "total_blocking": 0
    },
    "body": "```\r\n/Users/mperry/env/notebooks/lib/python3.6/site-packages/rasterstats/main.py:165: FutureWarning: \r\nConversion of the second argument of issubdtype from `float` to `np.floating` is deprecated.\r\nIn future, it will be treated as `np.float64 == np.dtype(float).type`.\r\n    np.issubdtype(fsrc.array.dtype, float)\r\n```",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/165/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/165/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "pinned_comment": null
  },
  {
    "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/157",
    "repository_url": "https://api.github.com/repos/perrygeo/python-rasterstats",
    "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/157/labels{/name}",
    "comments_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/157/comments",
    "events_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/157/events",
    "html_url": "https://github.com/perrygeo/python-rasterstats/issues/157",
    "id": 262792834,
    "node_id": "MDU6SXNzdWUyNjI3OTI4MzQ=",
    "number": 157,
    "title": "benchmark data unavailable",
    "user": {
      "login": "MartinHvidberg",
      "id": 5923517,
      "node_id": "MDQ6VXNlcjU5MjM1MTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5923517?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MartinHvidberg",
      "html_url": "https://github.com/MartinHvidberg",
      "followers_url": "https://api.github.com/users/MartinHvidberg/followers",
      "following_url": "https://api.github.com/users/MartinHvidberg/following{/other_user}",
      "gists_url": "https://api.github.com/users/MartinHvidberg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MartinHvidberg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MartinHvidberg/subscriptions",
      "organizations_url": "https://api.github.com/users/MartinHvidberg/orgs",
      "repos_url": "https://api.github.com/users/MartinHvidberg/repos",
      "events_url": "https://api.github.com/users/MartinHvidberg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MartinHvidberg/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [
      {
        "id": 56918395,
        "node_id": "MDU6TGFiZWw1NjkxODM5NQ==",
        "url": "https://api.github.com/repos/perrygeo/python-rasterstats/labels/bug",
        "name": "bug",
        "color": "fc2929",
        "default": true,
        "description": null
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": {
      "login": "perrygeo",
      "id": 1151287,
      "node_id": "MDQ6VXNlcjExNTEyODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1151287?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/perrygeo",
      "html_url": "https://github.com/perrygeo",
      "followers_url": "https://api.github.com/users/perrygeo/followers",
      "following_url": "https://api.github.com/users/perrygeo/following{/other_user}",
      "gists_url": "https://api.github.com/users/perrygeo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/perrygeo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/perrygeo/subscriptions",
      "organizations_url": "https://api.github.com/users/perrygeo/orgs",
      "repos_url": "https://api.github.com/users/perrygeo/repos",
      "events_url": "https://api.github.com/users/perrygeo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/perrygeo/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "assignees": [
      {
        "login": "perrygeo",
        "id": 1151287,
        "node_id": "MDQ6VXNlcjExNTEyODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1151287?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/perrygeo",
        "html_url": "https://github.com/perrygeo",
        "followers_url": "https://api.github.com/users/perrygeo/followers",
        "following_url": "https://api.github.com/users/perrygeo/following{/other_user}",
        "gists_url": "https://api.github.com/users/perrygeo/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/perrygeo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/perrygeo/subscriptions",
        "organizations_url": "https://api.github.com/users/perrygeo/orgs",
        "repos_url": "https://api.github.com/users/perrygeo/repos",
        "events_url": "https://api.github.com/users/perrygeo/events{/privacy}",
        "received_events_url": "https://api.github.com/users/perrygeo/received_events",
        "type": "User",
        "user_view_type": "public",
        "site_admin": false
      }
    ],
    "milestone": null,
    "comments": 4,
    "created_at": "2017-10-04T13:44:47Z",
    "updated_at": "2020-10-02T05:56:26Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "sub_issues_summary": {
      "total": 0,
      "completed": 0,
      "percent_completed": 0
    },
    "issue_dependencies_summary": {
      "blocked_by": 0,
      "total_blocked_by": 0,
      "blocking": 0,
      "total_blocking": 0
    },
    "body": "The benchmark data mentioned in ../examples/benchmark.py. (SRTM_1km_TIF) seems to be unavailable?  Please provide a working link.",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/157/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/157/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "pinned_comment": null
  },
  {
    "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/152",
    "repository_url": "https://api.github.com/repos/perrygeo/python-rasterstats",
    "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/152/labels{/name}",
    "comments_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/152/comments",
    "events_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/152/events",
    "html_url": "https://github.com/perrygeo/python-rasterstats/pull/152",
    "id": 228241142,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTIwMjg2MDY0",
    "number": 152,
    "title": "Adds the ability to preserve the feature IDs and properties when creating zonal stats without geojson",
    "user": {
      "login": "doclements",
      "id": 430808,
      "node_id": "MDQ6VXNlcjQzMDgwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/430808?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/doclements",
      "html_url": "https://github.com/doclements",
      "followers_url": "https://api.github.com/users/doclements/followers",
      "following_url": "https://api.github.com/users/doclements/following{/other_user}",
      "gists_url": "https://api.github.com/users/doclements/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/doclements/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/doclements/subscriptions",
      "organizations_url": "https://api.github.com/users/doclements/orgs",
      "repos_url": "https://api.github.com/users/doclements/repos",
      "events_url": "https://api.github.com/users/doclements/events{/privacy}",
      "received_events_url": "https://api.github.com/users/doclements/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [
      {
        "id": 2393517825,
        "node_id": "MDU6TGFiZWwyMzkzNTE3ODI1",
        "url": "https://api.github.com/repos/perrygeo/python-rasterstats/labels/Needs%20Additional%20Info",
        "name": "Needs Additional Info",
        "color": "c5def5",
        "default": false,
        "description": ""
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 0,
    "created_at": "2017-05-12T09:45:40Z",
    "updated_at": "2023-01-15T05:03:02Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/pulls/152",
      "html_url": "https://github.com/perrygeo/python-rasterstats/pull/152",
      "diff_url": "https://github.com/perrygeo/python-rasterstats/pull/152.diff",
      "patch_url": "https://github.com/perrygeo/python-rasterstats/pull/152.patch",
      "merged_at": null
    },
    "body": null,
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/152/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/152/timeline",
    "performed_via_github_app": null,
    "state_reason": null
  },
  {
    "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/150",
    "repository_url": "https://api.github.com/repos/perrygeo/python-rasterstats",
    "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/150/labels{/name}",
    "comments_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/150/comments",
    "events_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/150/events",
    "html_url": "https://github.com/perrygeo/python-rasterstats/pull/150",
    "id": 217681176,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTEzMDU4NTEz",
    "number": 150,
    "title": "No overlap counts",
    "user": {
      "login": "sgoodm",
      "id": 9094862,
      "node_id": "MDQ6VXNlcjkwOTQ4NjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9094862?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sgoodm",
      "html_url": "https://github.com/sgoodm",
      "followers_url": "https://api.github.com/users/sgoodm/followers",
      "following_url": "https://api.github.com/users/sgoodm/following{/other_user}",
      "gists_url": "https://api.github.com/users/sgoodm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sgoodm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sgoodm/subscriptions",
      "organizations_url": "https://api.github.com/users/sgoodm/orgs",
      "repos_url": "https://api.github.com/users/sgoodm/repos",
      "events_url": "https://api.github.com/users/sgoodm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sgoodm/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [
      {
        "id": 2393517825,
        "node_id": "MDU6TGFiZWwyMzkzNTE3ODI1",
        "url": "https://api.github.com/repos/perrygeo/python-rasterstats/labels/Needs%20Additional%20Info",
        "name": "Needs Additional Info",
        "color": "c5def5",
        "default": false,
        "description": ""
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 2,
    "created_at": "2017-03-28T20:22:55Z",
    "updated_at": "2023-01-15T05:03:01Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "draft": true,
    "pull_request": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/pulls/150",
      "html_url": "https://github.com/perrygeo/python-rasterstats/pull/150",
      "diff_url": "https://github.com/perrygeo/python-rasterstats/pull/150.diff",
      "patch_url": "https://github.com/perrygeo/python-rasterstats/pull/150.patch",
      "merged_at": null
    },
    "body": "Proof of concept for a new `no_overlap` stat as discussed in #105 . Currently only works using np array raster. Limitations for other raster data seems to be rooted in how rasterio initializes arrays when reading in data. Failing test case for data using rasterio is included",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/150/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/150/timeline",
    "performed_via_github_app": null,
    "state_reason": null
  },
  {
    "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/136",
    "repository_url": "https://api.github.com/repos/perrygeo/python-rasterstats",
    "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/136/labels{/name}",
    "comments_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/136/comments",
    "events_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/136/events",
    "html_url": "https://github.com/perrygeo/python-rasterstats/pull/136",
    "id": 190817697,
    "node_id": "MDExOlB1bGxSZXF1ZXN0OTQ2ODM4NDE=",
    "number": 136,
    "title": "New options: Percent coverage selection and weighting",
    "user": {
      "login": "sgoodm",
      "id": 9094862,
      "node_id": "MDQ6VXNlcjkwOTQ4NjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9094862?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sgoodm",
      "html_url": "https://github.com/sgoodm",
      "followers_url": "https://api.github.com/users/sgoodm/followers",
      "following_url": "https://api.github.com/users/sgoodm/following{/other_user}",
      "gists_url": "https://api.github.com/users/sgoodm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sgoodm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sgoodm/subscriptions",
      "organizations_url": "https://api.github.com/users/sgoodm/orgs",
      "repos_url": "https://api.github.com/users/sgoodm/repos",
      "events_url": "https://api.github.com/users/sgoodm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sgoodm/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [
      {
        "id": 2393517825,
        "node_id": "MDU6TGFiZWwyMzkzNTE3ODI1",
        "url": "https://api.github.com/repos/perrygeo/python-rasterstats/labels/Needs%20Additional%20Info",
        "name": "Needs Additional Info",
        "color": "c5def5",
        "default": false,
        "description": ""
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 24,
    "created_at": "2016-11-21T19:49:40Z",
    "updated_at": "2023-04-25T00:55:21Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "draft": false,
    "pull_request": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/pulls/136",
      "html_url": "https://github.com/perrygeo/python-rasterstats/pull/136",
      "diff_url": "https://github.com/perrygeo/python-rasterstats/pull/136.diff",
      "patch_url": "https://github.com/perrygeo/python-rasterstats/pull/136.patch",
      "merged_at": null
    },
    "body": "Adds code to generate percent coverage estimates for raster cells by rasterizing vector features at a finer resolution than raster data, then aggregating back to raster data resolution. An adjustable scale can be used (`percent_cover_scale` int arg) to adjust how accurate the estimates are. A scale of 10 = 1 order of magnitude finer resolution and is generally good enough to get estimates <10% from actual. A scale of 100 will usually get you well under 1% but is slower and requires quite a bit more memory*.\r\n\r\nUsers can use these coverage estimates to either discard cells that do not meet a minimum coverage (`percent_cover_selection` float arg) or use the weights to generate (potentially) more accurate measures of mean, count, and sum stats (`percent_cover_weighting` bool arg) \r\n\r\n*I have some misc memory improvements that I can put into another pull request\r\n\r\n(I can take care of merging this PR with the latitude correction PR i submitted if you want to use both of them)",
    "closed_by": {
      "login": "sgoodm",
      "id": 9094862,
      "node_id": "MDQ6VXNlcjkwOTQ4NjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9094862?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sgoodm",
      "html_url": "https://github.com/sgoodm",
      "followers_url": "https://api.github.com/users/sgoodm/followers",
      "following_url": "https://api.github.com/users/sgoodm/following{/other_user}",
      "gists_url": "https://api.github.com/users/sgoodm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sgoodm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sgoodm/subscriptions",
      "organizations_url": "https://api.github.com/users/sgoodm/orgs",
      "repos_url": "https://api.github.com/users/sgoodm/repos",
      "events_url": "https://api.github.com/users/sgoodm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sgoodm/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "reactions": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/136/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/136/timeline",
    "performed_via_github_app": null,
    "state_reason": null
  },
  {
    "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/133",
    "repository_url": "https://api.github.com/repos/perrygeo/python-rasterstats",
    "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/133/labels{/name}",
    "comments_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/133/comments",
    "events_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/133/events",
    "html_url": "https://github.com/perrygeo/python-rasterstats/issues/133",
    "id": 180452342,
    "node_id": "MDU6SXNzdWUxODA0NTIzNDI=",
    "number": 133,
    "title": "Move docs off pythonhosted",
    "user": {
      "login": "perrygeo",
      "id": 1151287,
      "node_id": "MDQ6VXNlcjExNTEyODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1151287?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/perrygeo",
      "html_url": "https://github.com/perrygeo",
      "followers_url": "https://api.github.com/users/perrygeo/followers",
      "following_url": "https://api.github.com/users/perrygeo/following{/other_user}",
      "gists_url": "https://api.github.com/users/perrygeo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/perrygeo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/perrygeo/subscriptions",
      "organizations_url": "https://api.github.com/users/perrygeo/orgs",
      "repos_url": "https://api.github.com/users/perrygeo/repos",
      "events_url": "https://api.github.com/users/perrygeo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/perrygeo/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [
      {
        "id": 57183474,
        "node_id": "MDU6TGFiZWw1NzE4MzQ3NA==",
        "url": "https://api.github.com/repos/perrygeo/python-rasterstats/labels/documentation",
        "name": "documentation",
        "color": "fbca04",
        "default": true,
        "description": null
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 0,
    "created_at": "2016-10-01T11:38:23Z",
    "updated_at": "2017-08-21T23:45:52Z",
    "closed_at": null,
    "author_association": "OWNER",
    "active_lock_reason": null,
    "sub_issues_summary": {
      "total": 0,
      "completed": 0,
      "percent_completed": 0
    },
    "issue_dependencies_summary": {
      "blocked_by": 0,
      "total_blocked_by": 0,
      "blocking": 0,
      "total_blocking": 0
    },
    "body": "Use github pages or readthedocs instead.\r\n",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/133/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/133/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "pinned_comment": null
  },
  {
    "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/124",
    "repository_url": "https://api.github.com/repos/perrygeo/python-rasterstats",
    "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/124/labels{/name}",
    "comments_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/124/comments",
    "events_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/124/events",
    "html_url": "https://github.com/perrygeo/python-rasterstats/issues/124",
    "id": 174361360,
    "node_id": "MDU6SXNzdWUxNzQzNjEzNjA=",
    "number": 124,
    "title": "Question: caching intermediate operations.",
    "user": {
      "login": "brendancol",
      "id": 433221,
      "node_id": "MDQ6VXNlcjQzMzIyMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/433221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brendancol",
      "html_url": "https://github.com/brendancol",
      "followers_url": "https://api.github.com/users/brendancol/followers",
      "following_url": "https://api.github.com/users/brendancol/following{/other_user}",
      "gists_url": "https://api.github.com/users/brendancol/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brendancol/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brendancol/subscriptions",
      "organizations_url": "https://api.github.com/users/brendancol/orgs",
      "repos_url": "https://api.github.com/users/brendancol/repos",
      "events_url": "https://api.github.com/users/brendancol/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brendancol/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [
      {
        "id": 56918397,
        "node_id": "MDU6TGFiZWw1NjkxODM5Nw==",
        "url": "https://api.github.com/repos/perrygeo/python-rasterstats/labels/enhancement",
        "name": "enhancement",
        "color": "84b6eb",
        "default": true,
        "description": null
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 3,
    "created_at": "2016-08-31T19:45:41Z",
    "updated_at": "2022-05-24T17:08:19Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "sub_issues_summary": {
      "total": 0,
      "completed": 0,
      "percent_completed": 0
    },
    "issue_dependencies_summary": {
      "blocked_by": 0,
      "total_blocked_by": 0,
      "blocking": 0,
      "total_blocking": 0
    },
    "body": "Hey hey. Great stuff. \n\n`Question:` When using `python-rasterstats` with one polygon and many rasters (or vice versa), do you see a clear spot where intermediate steps can be cached?  Examples: the rasterization of the polygon, or the reading of the value raster? \n",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/124/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/124/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "pinned_comment": null
  },
  {
    "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/108",
    "repository_url": "https://api.github.com/repos/perrygeo/python-rasterstats",
    "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/108/labels{/name}",
    "comments_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/108/comments",
    "events_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/108/events",
    "html_url": "https://github.com/perrygeo/python-rasterstats/issues/108",
    "id": 123720247,
    "node_id": "MDU6SXNzdWUxMjM3MjAyNDc=",
    "number": 108,
    "title": "Don't read raster if geometry bounds don't overlap",
    "user": {
      "login": "perrygeo",
      "id": 1151287,
      "node_id": "MDQ6VXNlcjExNTEyODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1151287?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/perrygeo",
      "html_url": "https://github.com/perrygeo",
      "followers_url": "https://api.github.com/users/perrygeo/followers",
      "following_url": "https://api.github.com/users/perrygeo/following{/other_user}",
      "gists_url": "https://api.github.com/users/perrygeo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/perrygeo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/perrygeo/subscriptions",
      "organizations_url": "https://api.github.com/users/perrygeo/orgs",
      "repos_url": "https://api.github.com/users/perrygeo/repos",
      "events_url": "https://api.github.com/users/perrygeo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/perrygeo/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [
      {
        "id": 56918397,
        "node_id": "MDU6TGFiZWw1NjkxODM5Nw==",
        "url": "https://api.github.com/repos/perrygeo/python-rasterstats/labels/enhancement",
        "name": "enhancement",
        "color": "84b6eb",
        "default": true,
        "description": null
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 0,
    "created_at": "2015-12-23T20:43:30Z",
    "updated_at": "2016-03-26T16:45:00Z",
    "closed_at": null,
    "author_association": "OWNER",
    "active_lock_reason": null,
    "sub_issues_summary": {
      "total": 0,
      "completed": 0,
      "percent_completed": 0
    },
    "issue_dependencies_summary": {
      "blocked_by": 0,
      "total_blocked_by": 0,
      "blocking": 0,
      "total_blocking": 0
    },
    "body": "In #107, @demiurg suggested some sort of catch for misaligned projections. \n\nWe can't compare spatial reference systems, that functionality doesn't currently exist: See https://github.com/perrygeo/python-rasterstats/issues/26#issuecomment-64965255. \n\nWe could compare spatial extents at a geometry level - add some logic that says \"don't even bother reading the raster if the geometry extent doesn't overlap with the raster extent\". It won't fix every case but it should catch some of them.\n\nSome considerations:\n- [ ] no Exception should be raised - it's expected that some geometries may be off the map in normal usage.\n- [ ] we need to calculate the number of non-overlapping pixels since rasterstats supports counting nodata cells. I don't know of a reliable way to do this without a boundless read. If we can't figure this out, it's a deal breaker.\n- [ ] a warning should be issued: \"Geometry does not overlap with raster, this may indicate a spatial referencing mismatch\"\n\nUltimately I'm not too psyched on including guard rails for such cases. If you ask `rasterstats` to compare this geometry against that raster, it should do it. But if we can put in a simple optimization _that doesn't break current usage_ I'll include it.\n",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/108/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/108/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "pinned_comment": null
  },
  {
    "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/105",
    "repository_url": "https://api.github.com/repos/perrygeo/python-rasterstats",
    "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/105/labels{/name}",
    "comments_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/105/comments",
    "events_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/105/events",
    "html_url": "https://github.com/perrygeo/python-rasterstats/issues/105",
    "id": 122926658,
    "node_id": "MDU6SXNzdWUxMjI5MjY2NTg=",
    "number": 105,
    "title": "nodata count includes non-overlapping cells",
    "user": {
      "login": "perrygeo",
      "id": 1151287,
      "node_id": "MDQ6VXNlcjExNTEyODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1151287?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/perrygeo",
      "html_url": "https://github.com/perrygeo",
      "followers_url": "https://api.github.com/users/perrygeo/followers",
      "following_url": "https://api.github.com/users/perrygeo/following{/other_user}",
      "gists_url": "https://api.github.com/users/perrygeo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/perrygeo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/perrygeo/subscriptions",
      "organizations_url": "https://api.github.com/users/perrygeo/orgs",
      "repos_url": "https://api.github.com/users/perrygeo/repos",
      "events_url": "https://api.github.com/users/perrygeo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/perrygeo/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [
      {
        "id": 56918395,
        "node_id": "MDU6TGFiZWw1NjkxODM5NQ==",
        "url": "https://api.github.com/repos/perrygeo/python-rasterstats/labels/bug",
        "name": "bug",
        "color": "fc2929",
        "default": true,
        "description": null
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/milestones/9",
      "html_url": "https://github.com/perrygeo/python-rasterstats/milestone/9",
      "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/milestones/9/labels",
      "id": 2041486,
      "node_id": "MDk6TWlsZXN0b25lMjA0MTQ4Ng==",
      "number": 9,
      "title": "0.12",
      "description": "",
      "creator": {
        "login": "perrygeo",
        "id": 1151287,
        "node_id": "MDQ6VXNlcjExNTEyODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1151287?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/perrygeo",
        "html_url": "https://github.com/perrygeo",
        "followers_url": "https://api.github.com/users/perrygeo/followers",
        "following_url": "https://api.github.com/users/perrygeo/following{/other_user}",
        "gists_url": "https://api.github.com/users/perrygeo/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/perrygeo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/perrygeo/subscriptions",
        "organizations_url": "https://api.github.com/users/perrygeo/orgs",
        "repos_url": "https://api.github.com/users/perrygeo/repos",
        "events_url": "https://api.github.com/users/perrygeo/events{/privacy}",
        "received_events_url": "https://api.github.com/users/perrygeo/received_events",
        "type": "User",
        "user_view_type": "public",
        "site_admin": false
      },
      "open_issues": 1,
      "closed_issues": 2,
      "state": "open",
      "created_at": "2016-10-01T11:24:37Z",
      "updated_at": "2017-03-26T13:56:11Z",
      "due_on": null,
      "closed_at": null
    },
    "comments": 10,
    "created_at": "2015-12-18T10:53:48Z",
    "updated_at": "2018-12-21T05:59:50Z",
    "closed_at": null,
    "author_association": "OWNER",
    "active_lock_reason": null,
    "sub_issues_summary": {
      "total": 0,
      "completed": 0,
      "percent_completed": 0
    },
    "issue_dependencies_summary": {
      "blocked_by": 0,
      "total_blocked_by": 0,
      "blocking": 0,
      "total_blocking": 0
    },
    "body": "For each feature, there are three types of cells: data, nodata, and non-overlapping. Nodata and non-overlapping get lumped together in the `nodata` statistic.\n\nWas this always the case? Was the bug introduced in an attempt to optimize? \n- [ ] write a failing test case for the partial overlap case\n- [ ] fix it\n",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/105/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/105/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "pinned_comment": null
  },
  {
    "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/98",
    "repository_url": "https://api.github.com/repos/perrygeo/python-rasterstats",
    "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/98/labels{/name}",
    "comments_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/98/comments",
    "events_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/98/events",
    "html_url": "https://github.com/perrygeo/python-rasterstats/issues/98",
    "id": 106853741,
    "node_id": "MDU6SXNzdWUxMDY4NTM3NDE=",
    "number": 98,
    "title": "Non-standard affine transforms handled incorrectly",
    "user": {
      "login": "perrygeo",
      "id": 1151287,
      "node_id": "MDQ6VXNlcjExNTEyODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1151287?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/perrygeo",
      "html_url": "https://github.com/perrygeo",
      "followers_url": "https://api.github.com/users/perrygeo/followers",
      "following_url": "https://api.github.com/users/perrygeo/following{/other_user}",
      "gists_url": "https://api.github.com/users/perrygeo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/perrygeo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/perrygeo/subscriptions",
      "organizations_url": "https://api.github.com/users/perrygeo/orgs",
      "repos_url": "https://api.github.com/users/perrygeo/repos",
      "events_url": "https://api.github.com/users/perrygeo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/perrygeo/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [
      {
        "id": 56918395,
        "node_id": "MDU6TGFiZWw1NjkxODM5NQ==",
        "url": "https://api.github.com/repos/perrygeo/python-rasterstats/labels/bug",
        "name": "bug",
        "color": "fc2929",
        "default": true,
        "description": null
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 8,
    "created_at": "2015-09-16T20:14:48Z",
    "updated_at": "2024-08-19T13:51:28Z",
    "closed_at": null,
    "author_association": "OWNER",
    "active_lock_reason": null,
    "sub_issues_summary": {
      "total": 0,
      "completed": 0,
      "percent_completed": 0
    },
    "issue_dependencies_summary": {
      "blocked_by": 0,
      "total_blocked_by": 0,
      "blocking": 0,
      "total_blocking": 0
    },
    "body": "If you have a dataset with inverted y axis (i.e. the `affine.e` parameter is positive) a lot of assumptions are broken since North is no longer \"up\".\n\nThe `bounds_window` must return row_start < row_stop due to rasterio design. So why not internally convert to north-up on read? The `window_bounds` functions always return w,s,e,n and we'd just need a few conditionals to ensure new_array was a north-up array.\n\nWork started in the `southup` branch\n",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/98/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/98/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "pinned_comment": null
  },
  {
    "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/97",
    "repository_url": "https://api.github.com/repos/perrygeo/python-rasterstats",
    "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/97/labels{/name}",
    "comments_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/97/comments",
    "events_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/97/events",
    "html_url": "https://github.com/perrygeo/python-rasterstats/issues/97",
    "id": 106804771,
    "node_id": "MDU6SXNzdWUxMDY4MDQ3NzE=",
    "number": 97,
    "title": "netCDF support",
    "user": {
      "login": "perrygeo",
      "id": 1151287,
      "node_id": "MDQ6VXNlcjExNTEyODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1151287?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/perrygeo",
      "html_url": "https://github.com/perrygeo",
      "followers_url": "https://api.github.com/users/perrygeo/followers",
      "following_url": "https://api.github.com/users/perrygeo/following{/other_user}",
      "gists_url": "https://api.github.com/users/perrygeo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/perrygeo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/perrygeo/subscriptions",
      "organizations_url": "https://api.github.com/users/perrygeo/orgs",
      "repos_url": "https://api.github.com/users/perrygeo/repos",
      "events_url": "https://api.github.com/users/perrygeo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/perrygeo/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [
      {
        "id": 56918397,
        "node_id": "MDU6TGFiZWw1NjkxODM5Nw==",
        "url": "https://api.github.com/repos/perrygeo/python-rasterstats/labels/enhancement",
        "name": "enhancement",
        "color": "84b6eb",
        "default": true,
        "description": null
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 4,
    "created_at": "2015-09-16T15:59:26Z",
    "updated_at": "2016-03-26T16:44:24Z",
    "closed_at": null,
    "author_association": "OWNER",
    "active_lock_reason": null,
    "sub_issues_summary": {
      "total": 0,
      "completed": 0,
      "percent_completed": 0
    },
    "issue_dependencies_summary": {
      "blocked_by": 0,
      "total_blocked_by": 0,
      "blocking": 0,
      "total_blocking": 0
    },
    "body": "netCDF support in GDAL/rasterio leaves something to be desired. \n\nThe [netcdf4-python](https://github.com/Unidata/netcdf4-python/blob/master/examples/reading_netCDF.ipynb) module would be a big improvement and allow for native access to netcdf files as well as GRIB2 and OpenDAP, in a more robust way. \n\nMost likely depends on #73 \n",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/97/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/97/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "pinned_comment": null
  },
  {
    "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/90",
    "repository_url": "https://api.github.com/repos/perrygeo/python-rasterstats",
    "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/90/labels{/name}",
    "comments_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/90/comments",
    "events_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/90/events",
    "html_url": "https://github.com/perrygeo/python-rasterstats/issues/90",
    "id": 106098897,
    "node_id": "MDU6SXNzdWUxMDYwOTg4OTc=",
    "number": 90,
    "title": "Rasterization pixel overlap strategy",
    "user": {
      "login": "perrygeo",
      "id": 1151287,
      "node_id": "MDQ6VXNlcjExNTEyODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1151287?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/perrygeo",
      "html_url": "https://github.com/perrygeo",
      "followers_url": "https://api.github.com/users/perrygeo/followers",
      "following_url": "https://api.github.com/users/perrygeo/following{/other_user}",
      "gists_url": "https://api.github.com/users/perrygeo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/perrygeo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/perrygeo/subscriptions",
      "organizations_url": "https://api.github.com/users/perrygeo/orgs",
      "repos_url": "https://api.github.com/users/perrygeo/repos",
      "events_url": "https://api.github.com/users/perrygeo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/perrygeo/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [
      {
        "id": 56918397,
        "node_id": "MDU6TGFiZWw1NjkxODM5Nw==",
        "url": "https://api.github.com/repos/perrygeo/python-rasterstats/labels/enhancement",
        "name": "enhancement",
        "color": "84b6eb",
        "default": true,
        "description": null
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/milestones/7",
      "html_url": "https://github.com/perrygeo/python-rasterstats/milestone/7",
      "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/milestones/7/labels",
      "id": 1301825,
      "node_id": "MDk6TWlsZXN0b25lMTMwMTgyNQ==",
      "number": 7,
      "title": "post 1.0",
      "description": "",
      "creator": {
        "login": "perrygeo",
        "id": 1151287,
        "node_id": "MDQ6VXNlcjExNTEyODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1151287?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/perrygeo",
        "html_url": "https://github.com/perrygeo",
        "followers_url": "https://api.github.com/users/perrygeo/followers",
        "following_url": "https://api.github.com/users/perrygeo/following{/other_user}",
        "gists_url": "https://api.github.com/users/perrygeo/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/perrygeo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/perrygeo/subscriptions",
        "organizations_url": "https://api.github.com/users/perrygeo/orgs",
        "repos_url": "https://api.github.com/users/perrygeo/repos",
        "events_url": "https://api.github.com/users/perrygeo/events{/privacy}",
        "received_events_url": "https://api.github.com/users/perrygeo/received_events",
        "type": "User",
        "user_view_type": "public",
        "site_admin": false
      },
      "open_issues": 1,
      "closed_issues": 0,
      "state": "open",
      "created_at": "2015-09-11T21:47:27Z",
      "updated_at": "2015-09-11T21:47:59Z",
      "due_on": null,
      "closed_at": null
    },
    "comments": 7,
    "created_at": "2015-09-11T21:36:53Z",
    "updated_at": "2017-03-21T18:19:04Z",
    "closed_at": null,
    "author_association": "OWNER",
    "active_lock_reason": null,
    "sub_issues_summary": {
      "total": 0,
      "completed": 0,
      "percent_completed": 0
    },
    "issue_dependencies_summary": {
      "blocked_by": 0,
      "total_blocked_by": 0,
      "blocking": 0,
      "total_blocking": 0
    },
    "body": "In addition to all_touched vs centroid, there's the possibility of using a partial pixel coverage to e.g. select cells with > X% overlap.\n\nSee the discussion at mapbox/rasterio#232 and a [proof-of-concept implementation](https://gist.github.com/perrygeo/721040f8545272832a42#file-pctcover-png) \n\nThe core functionality of calculating pixel weights probably belongs in GDAL or rasterio but could also live here I suppose. This lib would just use the result to threshold pixels above a specified percentage.\n",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/90/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/90/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "pinned_comment": null
  },
  {
    "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/73",
    "repository_url": "https://api.github.com/repos/perrygeo/python-rasterstats",
    "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/73/labels{/name}",
    "comments_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/73/comments",
    "events_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/73/events",
    "html_url": "https://github.com/perrygeo/python-rasterstats/issues/73",
    "id": 101112493,
    "node_id": "MDU6SXNzdWUxMDExMTI0OTM=",
    "number": 73,
    "title": "Multiband support",
    "user": {
      "login": "perrygeo",
      "id": 1151287,
      "node_id": "MDQ6VXNlcjExNTEyODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1151287?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/perrygeo",
      "html_url": "https://github.com/perrygeo",
      "followers_url": "https://api.github.com/users/perrygeo/followers",
      "following_url": "https://api.github.com/users/perrygeo/following{/other_user}",
      "gists_url": "https://api.github.com/users/perrygeo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/perrygeo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/perrygeo/subscriptions",
      "organizations_url": "https://api.github.com/users/perrygeo/orgs",
      "repos_url": "https://api.github.com/users/perrygeo/repos",
      "events_url": "https://api.github.com/users/perrygeo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/perrygeo/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [
      {
        "id": 56918397,
        "node_id": "MDU6TGFiZWw1NjkxODM5Nw==",
        "url": "https://api.github.com/repos/perrygeo/python-rasterstats/labels/enhancement",
        "name": "enhancement",
        "color": "84b6eb",
        "default": true,
        "description": null
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/milestones/6",
      "html_url": "https://github.com/perrygeo/python-rasterstats/milestone/6",
      "labels_url": "https://api.github.com/repos/perrygeo/python-rasterstats/milestones/6/labels",
      "id": 1301823,
      "node_id": "MDk6TWlsZXN0b25lMTMwMTgyMw==",
      "number": 6,
      "title": "0.10",
      "description": "",
      "creator": {
        "login": "perrygeo",
        "id": 1151287,
        "node_id": "MDQ6VXNlcjExNTEyODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1151287?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/perrygeo",
        "html_url": "https://github.com/perrygeo",
        "followers_url": "https://api.github.com/users/perrygeo/followers",
        "following_url": "https://api.github.com/users/perrygeo/following{/other_user}",
        "gists_url": "https://api.github.com/users/perrygeo/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/perrygeo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/perrygeo/subscriptions",
        "organizations_url": "https://api.github.com/users/perrygeo/orgs",
        "repos_url": "https://api.github.com/users/perrygeo/repos",
        "events_url": "https://api.github.com/users/perrygeo/events{/privacy}",
        "received_events_url": "https://api.github.com/users/perrygeo/received_events",
        "type": "User",
        "user_view_type": "public",
        "site_admin": false
      },
      "open_issues": 1,
      "closed_issues": 3,
      "state": "closed",
      "created_at": "2015-09-11T21:47:02Z",
      "updated_at": "2016-09-03T13:31:58Z",
      "due_on": "2015-12-31T04:00:00Z",
      "closed_at": "2016-09-03T13:31:58Z"
    },
    "comments": 5,
    "created_at": "2015-08-14T22:08:47Z",
    "updated_at": "2022-07-22T13:35:52Z",
    "closed_at": null,
    "author_association": "OWNER",
    "active_lock_reason": null,
    "sub_issues_summary": {
      "total": 0,
      "completed": 0,
      "percent_completed": 0
    },
    "issue_dependencies_summary": {
      "blocked_by": 0,
      "total_blocked_by": 0,
      "blocking": 0,
      "total_blocking": 0
    },
    "body": "`zonalstats` was originally optimized for large vector feature collections against a single raster band (i.e. thousands of polygons against a DEM raster)\n\nThere is another use case which `zonalstats` doesn't handle so well: many rasters/bands against a single geometry (i.e. the value at a single point for thousands of climate model simulations or a multispectral image). You can loop through and call zonal stats on each raster/band but this incurs the overhead of the rasterio.open each time. A more efficient mechanism might be to stack all the data into a multi-band raster and open it once, slice the 3D array and don't apply the aggregate functions to the 3rd dim - return an array rather than a scalar statistic.\n\nI'll have to do some research to see how much refactoring/code clutter this would cause. Otherwise, it might just be a new `zonalstats_multiband` function.\n",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/73/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/perrygeo/python-rasterstats/issues/73/timeline",
    "performed_via_github_app": null,
    "state_reason": null,
    "pinned_comment": null
  }
]
